<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>6.4 Directives | JFinal Docs</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/jfinal-doc/logo.png">
    <link rel="manifest" href="/jfinal-doc/manifest.json">
    <link rel="apple-touch-icon" href="/jfinal-doc/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/jfinal-doc/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <link rel="icon" href="/jfinal-doc/favicon.ico">
    <script crossorigin="anonymous" async="true" src=""></script>
    <meta name="description" content="Java Web 快速开发框架">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="author" content="litongjava@qq.com,jfinal@qq.com">
    <meta name="keywords" content="JFinal,jfinal">
    
    <link rel="preload" href="/jfinal-doc/assets/css/0.styles.97a4a6eb.css" as="style"><link rel="preload" href="/jfinal-doc/assets/js/app.425a107a.js" as="script"><link rel="preload" href="/jfinal-doc/assets/js/7.b0326031.js" as="script"><link rel="preload" href="/jfinal-doc/assets/js/1.1b1f549f.js" as="script"><link rel="preload" href="/jfinal-doc/assets/js/106.17af024d.js" as="script"><link rel="preload" href="/jfinal-doc/assets/js/20.0321efd6.js" as="script"><link rel="prefetch" href="/jfinal-doc/assets/js/100.ae64c85e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/101.be187ebc.js"><link rel="prefetch" href="/jfinal-doc/assets/js/102.a4c6d732.js"><link rel="prefetch" href="/jfinal-doc/assets/js/103.24865530.js"><link rel="prefetch" href="/jfinal-doc/assets/js/104.dd230e10.js"><link rel="prefetch" href="/jfinal-doc/assets/js/105.27321024.js"><link rel="prefetch" href="/jfinal-doc/assets/js/107.fb214325.js"><link rel="prefetch" href="/jfinal-doc/assets/js/108.cfa0fccc.js"><link rel="prefetch" href="/jfinal-doc/assets/js/109.e59eba02.js"><link rel="prefetch" href="/jfinal-doc/assets/js/11.ef250f54.js"><link rel="prefetch" href="/jfinal-doc/assets/js/110.2ecb852f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/111.c94f1227.js"><link rel="prefetch" href="/jfinal-doc/assets/js/112.4fbfc83a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/113.a1c300b3.js"><link rel="prefetch" href="/jfinal-doc/assets/js/114.5fed3dea.js"><link rel="prefetch" href="/jfinal-doc/assets/js/115.88ad08b5.js"><link rel="prefetch" href="/jfinal-doc/assets/js/116.6afa4f17.js"><link rel="prefetch" href="/jfinal-doc/assets/js/117.128207f4.js"><link rel="prefetch" href="/jfinal-doc/assets/js/118.91b18043.js"><link rel="prefetch" href="/jfinal-doc/assets/js/119.afa456d1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/12.cf02c8bc.js"><link rel="prefetch" href="/jfinal-doc/assets/js/120.2e306bdd.js"><link rel="prefetch" href="/jfinal-doc/assets/js/121.cbf7b4a7.js"><link rel="prefetch" href="/jfinal-doc/assets/js/122.18ca8844.js"><link rel="prefetch" href="/jfinal-doc/assets/js/123.8093d03f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/124.54a342f8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/125.6051abbc.js"><link rel="prefetch" href="/jfinal-doc/assets/js/126.ae613630.js"><link rel="prefetch" href="/jfinal-doc/assets/js/127.054813c5.js"><link rel="prefetch" href="/jfinal-doc/assets/js/128.b2cd396f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/129.4f377324.js"><link rel="prefetch" href="/jfinal-doc/assets/js/13.2774ff6a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/130.ea1600a8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/131.e7e6523d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/132.8f1e2542.js"><link rel="prefetch" href="/jfinal-doc/assets/js/133.e85a7527.js"><link rel="prefetch" href="/jfinal-doc/assets/js/134.170aa27d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/135.77bfade9.js"><link rel="prefetch" href="/jfinal-doc/assets/js/136.5fd3486f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/137.21a260fb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/138.f61b33fd.js"><link rel="prefetch" href="/jfinal-doc/assets/js/139.d063cd4c.js"><link rel="prefetch" href="/jfinal-doc/assets/js/14.39dfcf5b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/140.9cc2b7f0.js"><link rel="prefetch" href="/jfinal-doc/assets/js/141.b3f6c570.js"><link rel="prefetch" href="/jfinal-doc/assets/js/142.1e9fc2c4.js"><link rel="prefetch" href="/jfinal-doc/assets/js/143.9dcec95a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/144.e0619f9f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/145.6043f45d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/146.2bed631f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/147.932accd8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/148.83947d95.js"><link rel="prefetch" href="/jfinal-doc/assets/js/149.3d73537f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/15.1d59ce32.js"><link rel="prefetch" href="/jfinal-doc/assets/js/150.20c7c98a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/151.4247cbbc.js"><link rel="prefetch" href="/jfinal-doc/assets/js/152.a742623b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/153.d18556e2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/154.86d01f41.js"><link rel="prefetch" href="/jfinal-doc/assets/js/155.77c38901.js"><link rel="prefetch" href="/jfinal-doc/assets/js/156.8f256802.js"><link rel="prefetch" href="/jfinal-doc/assets/js/157.10c4b2e2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/158.6ea2014d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/159.aab0b37c.js"><link rel="prefetch" href="/jfinal-doc/assets/js/16.97792e1f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/160.5410653f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/161.d91ac0ae.js"><link rel="prefetch" href="/jfinal-doc/assets/js/162.eadf936b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/163.44f23137.js"><link rel="prefetch" href="/jfinal-doc/assets/js/164.ec28590b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/165.5e5361f0.js"><link rel="prefetch" href="/jfinal-doc/assets/js/166.43071f33.js"><link rel="prefetch" href="/jfinal-doc/assets/js/167.7fcb03ca.js"><link rel="prefetch" href="/jfinal-doc/assets/js/168.e3abd12b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/169.dadb7744.js"><link rel="prefetch" href="/jfinal-doc/assets/js/17.609bf5e3.js"><link rel="prefetch" href="/jfinal-doc/assets/js/170.831a50de.js"><link rel="prefetch" href="/jfinal-doc/assets/js/171.975c4c93.js"><link rel="prefetch" href="/jfinal-doc/assets/js/172.77df72c7.js"><link rel="prefetch" href="/jfinal-doc/assets/js/173.58a6b01a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/174.b2d8aacb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/175.65f036cb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/176.f3365ad1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/177.730b30f1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/178.1ab011ed.js"><link rel="prefetch" href="/jfinal-doc/assets/js/179.8e2a3d51.js"><link rel="prefetch" href="/jfinal-doc/assets/js/18.aaa40e3a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/180.687f2beb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/181.1a7cdd1e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/182.57647217.js"><link rel="prefetch" href="/jfinal-doc/assets/js/183.92c32944.js"><link rel="prefetch" href="/jfinal-doc/assets/js/184.ab154d41.js"><link rel="prefetch" href="/jfinal-doc/assets/js/185.4b7482e8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/186.dd2f9684.js"><link rel="prefetch" href="/jfinal-doc/assets/js/187.813417f9.js"><link rel="prefetch" href="/jfinal-doc/assets/js/188.59411c4f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/189.07f21c5d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/19.5755ba99.js"><link rel="prefetch" href="/jfinal-doc/assets/js/190.daafd531.js"><link rel="prefetch" href="/jfinal-doc/assets/js/191.5f29108a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/192.2f223030.js"><link rel="prefetch" href="/jfinal-doc/assets/js/193.daaba79e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/194.b663c6ab.js"><link rel="prefetch" href="/jfinal-doc/assets/js/195.0eb80318.js"><link rel="prefetch" href="/jfinal-doc/assets/js/196.5385091f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/197.120e48aa.js"><link rel="prefetch" href="/jfinal-doc/assets/js/198.78d5aad7.js"><link rel="prefetch" href="/jfinal-doc/assets/js/199.432594f2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/2.b8ead7ab.js"><link rel="prefetch" href="/jfinal-doc/assets/js/200.488cd3f1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/201.22476fe9.js"><link rel="prefetch" href="/jfinal-doc/assets/js/202.9f511aec.js"><link rel="prefetch" href="/jfinal-doc/assets/js/203.99836932.js"><link rel="prefetch" href="/jfinal-doc/assets/js/204.474c6584.js"><link rel="prefetch" href="/jfinal-doc/assets/js/205.d23af257.js"><link rel="prefetch" href="/jfinal-doc/assets/js/206.ee68c22a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/207.b84149c8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/208.66530c62.js"><link rel="prefetch" href="/jfinal-doc/assets/js/209.c0eba508.js"><link rel="prefetch" href="/jfinal-doc/assets/js/21.9fef675b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/210.fb463260.js"><link rel="prefetch" href="/jfinal-doc/assets/js/211.87f50f41.js"><link rel="prefetch" href="/jfinal-doc/assets/js/212.49295f08.js"><link rel="prefetch" href="/jfinal-doc/assets/js/213.06e1a3b6.js"><link rel="prefetch" href="/jfinal-doc/assets/js/214.4b5e2585.js"><link rel="prefetch" href="/jfinal-doc/assets/js/215.76bcc388.js"><link rel="prefetch" href="/jfinal-doc/assets/js/216.1882dab8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/217.4c7c5e90.js"><link rel="prefetch" href="/jfinal-doc/assets/js/218.694ab1aa.js"><link rel="prefetch" href="/jfinal-doc/assets/js/219.9be41632.js"><link rel="prefetch" href="/jfinal-doc/assets/js/22.f1876d87.js"><link rel="prefetch" href="/jfinal-doc/assets/js/220.701f5be0.js"><link rel="prefetch" href="/jfinal-doc/assets/js/221.35ecd756.js"><link rel="prefetch" href="/jfinal-doc/assets/js/222.63cbd873.js"><link rel="prefetch" href="/jfinal-doc/assets/js/223.aab67c3c.js"><link rel="prefetch" href="/jfinal-doc/assets/js/224.c9ecbf5d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/225.8ae68866.js"><link rel="prefetch" href="/jfinal-doc/assets/js/226.c22717a4.js"><link rel="prefetch" href="/jfinal-doc/assets/js/23.ed870693.js"><link rel="prefetch" href="/jfinal-doc/assets/js/24.65e97dfd.js"><link rel="prefetch" href="/jfinal-doc/assets/js/25.b7821b31.js"><link rel="prefetch" href="/jfinal-doc/assets/js/26.a5e5a9bb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/27.80888a40.js"><link rel="prefetch" href="/jfinal-doc/assets/js/28.4dd6fa1e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/29.2855cc63.js"><link rel="prefetch" href="/jfinal-doc/assets/js/3.980a2527.js"><link rel="prefetch" href="/jfinal-doc/assets/js/30.81c4cd83.js"><link rel="prefetch" href="/jfinal-doc/assets/js/31.492b9642.js"><link rel="prefetch" href="/jfinal-doc/assets/js/32.61705f9c.js"><link rel="prefetch" href="/jfinal-doc/assets/js/33.d8965f45.js"><link rel="prefetch" href="/jfinal-doc/assets/js/34.b139ed96.js"><link rel="prefetch" href="/jfinal-doc/assets/js/35.e95dad8f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/36.fb136890.js"><link rel="prefetch" href="/jfinal-doc/assets/js/37.3b3bfe50.js"><link rel="prefetch" href="/jfinal-doc/assets/js/38.a8713bf3.js"><link rel="prefetch" href="/jfinal-doc/assets/js/39.68ecaea1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/4.a63d3093.js"><link rel="prefetch" href="/jfinal-doc/assets/js/40.a943f786.js"><link rel="prefetch" href="/jfinal-doc/assets/js/41.131c5943.js"><link rel="prefetch" href="/jfinal-doc/assets/js/42.63eeadac.js"><link rel="prefetch" href="/jfinal-doc/assets/js/43.0df81f42.js"><link rel="prefetch" href="/jfinal-doc/assets/js/44.33b460e2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/45.863d7366.js"><link rel="prefetch" href="/jfinal-doc/assets/js/46.922355bd.js"><link rel="prefetch" href="/jfinal-doc/assets/js/47.43dce9f5.js"><link rel="prefetch" href="/jfinal-doc/assets/js/48.c46b45bd.js"><link rel="prefetch" href="/jfinal-doc/assets/js/49.9ce43caf.js"><link rel="prefetch" href="/jfinal-doc/assets/js/5.b70ff20d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/50.5e87d85f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/51.59df5bbb.js"><link rel="prefetch" href="/jfinal-doc/assets/js/52.edbe3065.js"><link rel="prefetch" href="/jfinal-doc/assets/js/53.174f3852.js"><link rel="prefetch" href="/jfinal-doc/assets/js/54.a4e86a01.js"><link rel="prefetch" href="/jfinal-doc/assets/js/55.51b04a7d.js"><link rel="prefetch" href="/jfinal-doc/assets/js/56.d772fc74.js"><link rel="prefetch" href="/jfinal-doc/assets/js/57.86f22e10.js"><link rel="prefetch" href="/jfinal-doc/assets/js/58.53dd53c2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/59.7bc8e9d8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/6.aaf4baf3.js"><link rel="prefetch" href="/jfinal-doc/assets/js/60.c7e4bc8b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/61.c42d087f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/62.1bc79f1a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/63.71793240.js"><link rel="prefetch" href="/jfinal-doc/assets/js/64.91b6285b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/65.b92aa093.js"><link rel="prefetch" href="/jfinal-doc/assets/js/66.d72202ef.js"><link rel="prefetch" href="/jfinal-doc/assets/js/67.8a6b7666.js"><link rel="prefetch" href="/jfinal-doc/assets/js/68.10d6a891.js"><link rel="prefetch" href="/jfinal-doc/assets/js/69.a723ff7a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/70.427a928b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/71.3a740ba8.js"><link rel="prefetch" href="/jfinal-doc/assets/js/72.1022aa4b.js"><link rel="prefetch" href="/jfinal-doc/assets/js/73.1169d795.js"><link rel="prefetch" href="/jfinal-doc/assets/js/74.e94428b5.js"><link rel="prefetch" href="/jfinal-doc/assets/js/75.ea4ca766.js"><link rel="prefetch" href="/jfinal-doc/assets/js/76.130631fe.js"><link rel="prefetch" href="/jfinal-doc/assets/js/77.a77f3f4e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/78.4b016d18.js"><link rel="prefetch" href="/jfinal-doc/assets/js/79.83d4f571.js"><link rel="prefetch" href="/jfinal-doc/assets/js/8.3c2d30c9.js"><link rel="prefetch" href="/jfinal-doc/assets/js/80.2beb1b23.js"><link rel="prefetch" href="/jfinal-doc/assets/js/81.7a3934b2.js"><link rel="prefetch" href="/jfinal-doc/assets/js/82.02ba9895.js"><link rel="prefetch" href="/jfinal-doc/assets/js/83.517bccb1.js"><link rel="prefetch" href="/jfinal-doc/assets/js/84.f4ab4472.js"><link rel="prefetch" href="/jfinal-doc/assets/js/85.ec21606f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/86.46b7ca95.js"><link rel="prefetch" href="/jfinal-doc/assets/js/87.15c7c9c9.js"><link rel="prefetch" href="/jfinal-doc/assets/js/88.7961e89f.js"><link rel="prefetch" href="/jfinal-doc/assets/js/89.4c18bb94.js"><link rel="prefetch" href="/jfinal-doc/assets/js/90.307c71c3.js"><link rel="prefetch" href="/jfinal-doc/assets/js/91.2136034e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/92.1c6990fa.js"><link rel="prefetch" href="/jfinal-doc/assets/js/93.0c91ba5a.js"><link rel="prefetch" href="/jfinal-doc/assets/js/94.73570b95.js"><link rel="prefetch" href="/jfinal-doc/assets/js/95.516b5e16.js"><link rel="prefetch" href="/jfinal-doc/assets/js/96.003d8989.js"><link rel="prefetch" href="/jfinal-doc/assets/js/97.d76fc551.js"><link rel="prefetch" href="/jfinal-doc/assets/js/98.2f2b446e.js"><link rel="prefetch" href="/jfinal-doc/assets/js/99.1d073b56.js"><link rel="prefetch" href="/jfinal-doc/assets/js/vendors~docsearch.ae8c10bc.js">
    <link rel="stylesheet" href="/jfinal-doc/assets/css/0.styles.97a4a6eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jfinal-doc/" class="home-link router-link-active"><img src="/jfinal-doc/jfinallogo.png" alt="JFinal Docs" class="logo"> <span class="site-name can-hide">JFinal Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sources Menu" class="dropdown-title"><span class="title">Sources</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sources Menu" class="mobile-dropdown-title"><span class="title">Sources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/jfinal/jfinal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jfinal/jfinal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jfinal-doc/zh/1 快速上手/1.0 快速上手.html" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/jfinal-doc/en/1 Quick Start/1.0 Quick Start.html" class="nav-link">
  English
</a></li></ul></div></div><div class="nav-item"><a href="/jfinal-doc/about/" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sources Menu" class="dropdown-title"><span class="title">Sources</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sources Menu" class="mobile-dropdown-title"><span class="title">Sources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/jfinal/jfinal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jfinal/jfinal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jfinal-doc/zh/1 快速上手/1.0 快速上手.html" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/jfinal-doc/en/1 Quick Start/1.0 Quick Start.html" class="nav-link">
  English
</a></li></ul></div></div><div class="nav-item"><a href="/jfinal-doc/about/" class="nav-link">
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>1 Quick Start</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/1 Quick Start/1.0 Quick Start.html" class="sidebar-link">1.0 Quick Start</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.1 Basics of Maven.html" class="sidebar-link">1.1 Maven Basics</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.2 Development under jfinal-undertow.html" class="sidebar-link">1.2 jfinal-undertow Development</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.3 Deployment under jfinal-undertow.html" class="sidebar-link">1.3 Deploying under jfinal-undertow</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.4 Advanced usage of jfinal-undertow.html" class="sidebar-link">1.4 Advanced Usage of jfinal-undertow</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.5 Common issues with jfinal-undertow.html" class="sidebar-link">1.5 Common issues with jfinal-undertow</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.6 Development under jetty-server.html" class="sidebar-link">1.6 Development under jetty-server</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.7 Deployment under tomcat.html" class="sidebar-link">1.7 Deployment under tomcat</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.8 Development without Maven.html" class="sidebar-link">1.8 Development without Maven</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.9 Development under IDEA.html" class="sidebar-link">1.9 Development under IDEA</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.10 Development under JBolt plugin.html" class="sidebar-link">1.10 Development under JBolt plugin</a></li><li><a href="/jfinal-doc/en/1 Quick Start/1.11 Special Statement.html" class="sidebar-link">1.11 Special Statement</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>2 JFinalConfig</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/2 JFinalConfig/2.1 Overview.html" class="sidebar-link">2.1 Overview</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.2 configConstant.html" class="sidebar-link">2.2 configConstant</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.3 configRoute.html" class="sidebar-link">2.3 configRoute</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.4 configEngine.html" class="sidebar-link">2.4 configEngine</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.5 configPlugin.html" class="sidebar-link">2.5 configPlugin</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.6 configInterceptor.html" class="sidebar-link">2.6 configInterceptor</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.7 configHandler.html" class="sidebar-link">2.7 configHandler</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.8 onStart and onStop callback configuration.html" class="sidebar-link">2.8 onStart and onStop callback configuration</a></li><li><a href="/jfinal-doc/en/2 JFinalConfig/2.9 PropKit configuration reading.html" class="sidebar-link">2.9 PropKit configuration reading</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>3 Controller</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/3 Controller/3.1 Overview.html" class="sidebar-link">3.1 Overview</a></li><li><a href="/jfinal-doc/en/3 Controller/3.2 Action.html" class="sidebar-link">3.2 Action</a></li><li><a href="/jfinal-doc/en/3 Controller/3.3 Action parameter injection.html" class="sidebar-link">3.3 Action parameter injection</a></li><li><a href="/jfinal-doc/en/3 Controller/3.4 get &amp; getPara series methods.html" class="sidebar-link">3.4 get &amp; getPara series methods</a></li><li><a href="/jfinal-doc/en/3 Controller/3.5 getBean &amp; getModel series.html" class="sidebar-link">3.5 getBean &amp; getModel series</a></li><li><a href="/jfinal-doc/en/3 Controller/3.6 set &amp; setAttr methods.html" class="sidebar-link">3.6 set &amp; setAttr methods</a></li><li><a href="/jfinal-doc/en/3 Controller/3.7 render method.html" class="sidebar-link">3.7 render method</a></li><li><a href="/jfinal-doc/en/3 Controller/3.8 renderFile file download.html" class="sidebar-link">3.8 renderFile file download</a></li><li><a href="/jfinal-doc/en/3 Controller/3.9 renderQrCode QR code generation.html" class="sidebar-link">3.9 renderQrCode QR code generation</a></li><li><a href="/jfinal-doc/en/3 Controller/3.10 session operations.html" class="sidebar-link">3.10 session operations</a></li><li><a href="/jfinal-doc/en/3 Controller/3.11 getFile file upload.html" class="sidebar-link">3.11 File Upload with getFile</a></li><li><a href="/jfinal-doc/en/3 Controller/3.12 keep series methods.html" class="sidebar-link">3.12 keep series methods</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>4 AOP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/4 AOP/4.1 Overview.html" class="sidebar-link">4.1 Overview</a></li><li><a href="/jfinal-doc/en/4 AOP/4.2 Interceptor.html" class="sidebar-link">4.2 Interceptor</a></li><li><a href="/jfinal-doc/en/4 AOP/4.3 Before.html" class="sidebar-link">4.3 Before</a></li><li><a href="/jfinal-doc/en/4 AOP/4.4 Clear.html" class="sidebar-link">4.4 Clear</a></li><li><a href="/jfinal-doc/en/4 AOP/4.5 Inject dependency injection.html" class="sidebar-link">4.5 Inject dependency injection</a></li><li><a href="/jfinal-doc/en/4 AOP/4.6 Aop tool.html" class="sidebar-link">4.6 Aop tool</a></li><li><a href="/jfinal-doc/en/4 AOP/4.7 Routes level interceptor.html" class="sidebar-link">4.7 Routes level interceptor</a></li><li><a href="/jfinal-doc/en/4 AOP/4.8 Proxy dynamic proxy.html" class="sidebar-link">4.8 Proxy dynamic proxy</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>5 ActiveRecord</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/5 ActiveRecord/5.1 Overview.html" class="sidebar-link">5.1 Overview</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.2 ActiveRecordPlugin.html" class="sidebar-link">5.2 ActiveRecordPlugin</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.3 Model.html" class="sidebar-link">5.3 Model</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.4 Generator &amp; JavaBean.html" class="sidebar-link">5.4 Generator and JavaBean</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.5 Original Db Record mode.html" class="sidebar-link">5.5 The Unique Db Record Mode</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.6 paginate pagination.html" class="sidebar-link">5.6 Paginate Pagination</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.7 Database transaction handling.html" class="sidebar-link">5.7 Database Transaction Handling</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.8 Cache caching.html" class="sidebar-link">5.8 Cache caching</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.9 Dialect multiple database support.html" class="sidebar-link">5.9 Dialect for Multi-Database Support</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.10 Table association operations.html" class="sidebar-link">5.10 Table Association Operations</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.11 Composite primary key.html" class="sidebar-link">5.11 Composite Primary Keys</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.12 Oracle support.html" class="sidebar-link">5.12 Oracle Support</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.13 Enjoy SQL template.html" class="sidebar-link">5.13 Enjoy SQL Template</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.14 Multi-data source support.html" class="sidebar-link">5.14 Multiple Data Source Support</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.15 Use ActiveRecord independently.html" class="sidebar-link">5.15 Standalone Use of ActiveRecord</a></li><li><a href="/jfinal-doc/en/5 ActiveRecord/5.16 Call stored procedure.html" class="sidebar-link">5.16 Calling Stored Procedures</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>6 Enjoy template engine</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.1 Overview.html" class="sidebar-link">6.1 Overview</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.2 Engine configuration.html" class="sidebar-link">6.2 Engine Configuration</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.3 Expression.html" class="sidebar-link">6.3 Expressions</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.4 Directive.html" class="active sidebar-link">6.4 Directives</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.5 Comment.html" class="sidebar-link">6.5 Comments</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.6 Raw output.html" class="sidebar-link">6.6 Raw Output</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.7 Shared Method extension.html" class="sidebar-link">6.7 Shared Method Extension</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.8 Shared Object extension.html" class="sidebar-link">6.8 Shared Object Extension</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.9 Extension Method extension.html" class="sidebar-link">6.9 Extension Method Extension</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.10 Spring boot integration.html" class="sidebar-link">6.10 Integration with Spring Boot</a></li><li><a href="/jfinal-doc/en/6 Enjoy template engine/6.11 Use Enjoy independently.html" class="sidebar-link">6.11 Standalone Use of Enjoy</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>7 EhCachePlugin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.1 Overview.html" class="sidebar-link">7.1 Overview</a></li><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.2 EhCachePlugin.html" class="sidebar-link">7.2 EhCachePlugin Configuration</a></li><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.3 CacheInterceptor.html" class="sidebar-link">7.3 CacheInterceptor</a></li><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.4 EvictInterceptor.html" class="sidebar-link">7.4 EvictInterceptor</a></li><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.5 CacheKit.html" class="sidebar-link">7.5 CacheKit</a></li><li><a href="/jfinal-doc/en/7 EhCachePlugin/7.6 Introduction to ehcache.xml.html" class="sidebar-link">7.6 Introduction to ehcache.xml</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>8 RedisPlugin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/8 RedisPlugin/8.1 Overview.html" class="sidebar-link">8.1 Overview</a></li><li><a href="/jfinal-doc/en/8 RedisPlugin/8.2 RedisPlugin.html" class="sidebar-link">8.2 RedisPlugin</a></li><li><a href="/jfinal-doc/en/8 RedisPlugin/8.3 Redis and Cache.html" class="sidebar-link">8.3 Redis and Cache</a></li><li><a href="/jfinal-doc/en/8 RedisPlugin/8.4 Use RedisPlugin in non-web environments.html" class="sidebar-link">8.4 Using RedisPlugin in a Non-Web Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>9 Cron4jPlugin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/9 Cron4jPlugin/9.1 Overview.html" class="sidebar-link">9.1 Overview</a></li><li><a href="/jfinal-doc/en/9 Cron4jPlugin/9.2 Cron4jPlugin.html" class="sidebar-link">9.2 Cron4jPlugin</a></li><li><a href="/jfinal-doc/en/9 Cron4jPlugin/9.3 Use external configuration file.html" class="sidebar-link">9.3 Using External Configuration Files</a></li><li><a href="/jfinal-doc/en/9 Cron4jPlugin/9.4 Advanced usage.html" class="sidebar-link">9.4 Advanced Usage</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>10 Validator</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/10 Validator/10.1 Overview.html" class="sidebar-link">10.1 Overview</a></li><li><a href="/jfinal-doc/en/10 Validator/10.2 Validator.html" class="sidebar-link">10.2 Validator</a></li><li><a href="/jfinal-doc/en/10 Validator/10.3 Validator configuration.html" class="sidebar-link">10.3 Validator Configuration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>11 Internationalization</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/11 Internationalization/11.1 Overview.html" class="sidebar-link">11.1 Overview</a></li><li><a href="/jfinal-doc/en/11 Internationalization/11.2 I18n &amp; Res.html" class="sidebar-link">11.2 I18n and Res</a></li><li><a href="/jfinal-doc/en/11 Internationalization/11.3 I18nInterceptor.html" class="sidebar-link">11.3 I18nInterceptor</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>12 Json conversion</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/12 Json conversion/12.1 Overview.html" class="sidebar-link">12.1 Overview</a></li><li><a href="/jfinal-doc/en/12 Json conversion/12.2 Json configuration.html" class="sidebar-link">12.2 Json Configuration</a></li><li><a href="/jfinal-doc/en/12 Json conversion/12.3 Four implementations of Json.html" class="sidebar-link">12.3 Four Implementations of Json</a></li><li><a href="/jfinal-doc/en/12 Json conversion/12.4 Json conversion usage.html" class="sidebar-link">12.4 Usage of JSON Conversion in JFinal</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>13 JFinal architecture and extensions</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/13 JFinal architecture and extensions/13.1 Overview.html" class="sidebar-link">13.1 Overview</a></li><li><a href="/jfinal-doc/en/13 JFinal architecture and extensions/13.2 Architecture.html" class="sidebar-link">13.2 Architecture</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>14 Upgrade JFinal</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.1 Rapid upgrade.html" class="sidebar-link">14.1 Quick Upgrade</a></li><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.2 Ret.html" class="sidebar-link">14.2 Ret</a></li><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.3 configEngine.html" class="sidebar-link">14.3 configEngine</a></li><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.4 baseViewPath.html" class="sidebar-link">14.4 baseViewPath</a></li><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.5 RenderFactory.html" class="sidebar-link">14.5 RenderFactory</a></li><li><a href="/jfinal-doc/en/14 Upgrade JFinal/14.6 Others.html" class="sidebar-link">14.6 Others</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_6-4-directives"><a href="#_6-4-directives" class="header-anchor">#</a> 6.4 Directives</h1> <p>The Enjoy Template Engine consistently adheres to a minimalist design. With just seven core directives—<code>#if</code>, <code>#for</code>, <code>#switch</code>, <code>#set</code>, <code>#include</code>, <code>#define</code>, <code>#(...)</code>—it achieves nearly all the functionalities of traditional template engines. The learning curve is almost non-existent for users with a foundation in any programming language.</p> <p>If the built-in directives do not meet your needs, you can easily extend them at the template language level. Under the <code>com.jfinal.template.ext.directive</code> package, there are five extended directives. The Active Record SQL module also extends three directives specifically for SQL management. By studying the code for these extended directives, you can easily understand how to create your own, making the process extremely simple.</p> <p>Note that the extension of Enjoy template engine directives occurs at the lexical and syntactic analysis levels. This is entirely different from the tag-based extensions of traditional template engines. The former allows for comprehensive and flexible use of the engine's basic infrastructure, enabling versatile functionalities through very simple and straightforward code. To understand its power and convenience, refer to the SQL management module of Active Record.</p> <h3 id="_1-output-directive"><a href="#_1-output-directive" class="header-anchor">#</a> 1. Output Directive <code>#(...)</code></h3> <p>Unlike almost all Java template engines, Enjoy Template Engine eliminates the independent concept of interpolation directives, treating them as one among other directives. This directive uses parentheses as delimiters, just like any other directive, avoiding the need for extra delimiters like curly braces.</p> <p>Using the output directive <code>#(...)</code> is very simple; just pass any expression described in Section 6.4. The directive will output the evaluation result of these expressions. Specifically, if the expression evaluates to null, there will be no output and no exceptions will be thrown. For example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#(value)
#(object.field)
#(object.field ??)
#(a &gt; b ? x : y)
#(seoTitle ?? &quot;JFinal Club&quot;)
#(object.method(), null)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>As shown above, just pass an expression to the output directive. Note that in the first line, the <code>value</code> parameter can be null. If <code>object</code> is null in the second line, an exception will be thrown. To avoid this, use the null-safe access operator <code>object.field ??</code>.</p> <p>Additionally, note the last line in the example. The directive argument is a comma expression, and the directive will only output the last expression in the comma sequence. If the last expression evaluates to null, no output will be generated.</p> <p>The output directive can be customized by extending the <code>OutputDirectiveFactory</code> class and overriding its <code>getOutputDirective</code> method. Then you can switch to your custom output directive using <code>me.setOutputDirectiveFactory(...)</code> in the <code>configEngine(Engine me)</code> method.</p> <h3 id="_2-if-directive"><a href="#_2-if-directive" class="header-anchor">#</a> 2. <code>#if</code> Directive</h3> <p>Example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#if(cond)
  ...
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>As shown, the <code>#if</code> directive requires a <code>cond</code> expression and ends with <code>#end</code>. The <code>cond</code> can be any expression introduced in Section 6.3. When <code>cond</code> evaluates to true, the code inside the <code>if</code> block is executed.</p> <p>The <code>#if</code> directive naturally supports <code>#else if</code> and <code>#else</code> blocks. Example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#if(c1)
  ...
#else if(c2)
  ...
#else if(c3)
  ...
#else
  ...
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>The usage of <code>#else if</code> and <code>#else</code> is identical to Java syntax. (Note: In versions prior to JFinal 3.3, you must write <code>#elseif</code> without any space between <code>else</code> and <code>if</code>, otherwise an exception will be thrown.)</p> <h3 id="_3-for-directive"><a href="#_3-for-directive" class="header-anchor">#</a> 3. <code>#for</code> Directive</h3> <p>The Enjoy Template Engine offers an extremely user-friendly extension to the <code>#for</code> directive, allowing iteration over any type of data, including null values. Code example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// Iterating over List, array, Set structures
#for(x : list)
  #(x.field)
#end

// Iterating over a Map
#for(x : map)
  #(x.key)
  #(x.value)
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The first <code>#for</code> directive iterates over a list, and the usage is identical to Java syntax.</p> <p>The second <code>#for</code> directive iterates over a map, using <code>item.key</code> and <code>item.value</code> to access the elements. This is an enhancement by Enjoy to reduce code verbosity. You can also use the traditional Java map iteration method: <code>#for(x : map.entrySet()) #(x.key) #(x.value) #end</code></p> <p>Note: When the target of iteration is null, you don't need to check for null values; the <code>#for</code> directive will automatically skip the iteration, avoiding the need for <code>if</code> checks and thereby improving efficiency.</p> <p>The <code>#for</code> directive also allows you to access its state. Code example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#for(x : listAaa)
  #(for.index)
  #(x.field)
  
  #for(x : listBbb)
     #(for.outer.index)
     #(for.index)
     #(x.field)
  #end
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>In the code above, <code>#(for.index)</code> and <code>#(for.outer.index)</code> are used to access the current state of the <code>#for</code> directive. The former gets the current iteration index (starting from 0), and the latter allows an inner <code>#for</code> directive to access the state of an outer <code>#for</code> directive.</p> <p>Note: When <code>#for</code> directives are nested, each has its own variable scope, consistent with Java language rules. For example, the two instances of <code>#(x.field)</code> in the example above are in different <code>#for</code> directive scopes and will correctly access the variable values in their respective scopes.</p> <p>The <code>#for</code> directive supports the following states:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#for(x : listAaa)
   #(for.size)    Size of the iterated object
   #(for.index)   Index starting from 0
   #(for.count)   Count starting from 1
   #(for.first)   Is it the first iteration?
   #(for.last)    Is it the last iteration?
   #(for.odd)     Is it an odd iteration?
   #(for.even)    Is it an even iteration?
   
   #(for.outer)        References the state of the outer #for directive
   #(for.outer.size)   Size of the iterated object in the outer #for directive
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>The specific usage is explained in Chinese in the code above.</p> <p>Apart from <code>Map</code> and <code>List</code>, the <code>#for</code> directive also supports <code>Collection</code>, <code>Iterator</code>, array, <code>Iterable</code>, <code>Enumeration</code>, and null value iteration. The usage is identical in form to the earlier <code>List</code> iteration, all being <code>#for(id : target)</code>. For null values, the <code>#for</code> directive will directly skip the iteration.</p> <p>Additionally, the <code>#for</code> directive supports iteration over any type of object, simply iterating over it once. Example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#for(x : article)
   #(x.title)
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In the example above, <code>article</code> is just a regular Java object, not a collection. The <code>#for</code> loop will iterate over this object just once. The <code>x</code> in the <code>#for</code> expression is the <code>article</code> object itself, so you can use <code>#(x.title)</code> for output</p> <p>The <code>#for</code> directive also supports the <code>#else</code> branch. When the number of iterations is zero, the <code>#else</code> block is executed. Example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#for(blog : blogList)
   #(blog.title)
#else

You haven't written any blogs yet. Click here &lt;a href=&quot;/blog/add&quot;&gt;to start blogging&lt;/a&gt;.

#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>In the code above, when <code>blogList.size()</code> is 0 or <code>blogList</code> is null, meaning the number of iterations is zero, the <code>#else</code> branch will execute. This scenario is very common in web projects.</p> <p>Lastly, in addition to the <code>#for</code> directive iteration methods mentioned above, it also supports a more conventional <code>for</code> loop syntax. Code example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#for(i = 0; i &lt; 100; i++)
   #(i)
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The syntax is almost identical to Java, with the only difference being that variable declarations don't need types; direct assignment statements suffice. Variables in the Enjoy Template Engine are dynamically typed.</p> <p>Note: This form of <code>for</code> loop lacks <code>for.size</code> and <code>for.last</code> states, and only supports the following states: <code>for.index</code>, <code>for.count</code>, <code>for.first</code>, <code>for.odd</code>, <code>for.even</code>, <code>for.outer</code>.</p> <p>The <code>#for</code> directive also supports <code>#continue</code> and <code>#break</code> commands, and their usage is entirely consistent with Java. Further details are not provided here.</p> <h3 id="_4-switch-directive-added-in-version-3-6"><a href="#_4-switch-directive-added-in-version-3-6" class="header-anchor">#</a> 4. <code>#switch</code> Directive (Added in version 3.6)</h3> <p>The <code>#switch</code> directive is aligned with Java's <code>switch</code> statement, offering similar basic usage but with some improvements for a better user experience. Usage is as follows:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#switch (month)
  #case (1, 3, 5, 7, 8, 10, 12)
    #(month) months have 31 days
  #case (2)
    #(month) has 28 days in a common year and 29 days in a leap year
  #default
    Invalid month: #(month ?? &quot;null&quot;)
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>As shown in the code above, the <code>#case</code> directive supports multiple arguments separated by commas, effectively eliminating the need for a <code>#break</code> directive. Therefore, the Enjoy Template Engine does not require the use of <code>#break</code>.</p> <p>Parameters for the <code>#case</code> directive can be any expression, such as:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#case (a, b, x + y, &quot;abc&quot;, &quot;123&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In the code above, the comma-separated expressions are first evaluated, and then each is compared to the value in <code>#switch(value)</code>. If any of these values match, that <code>#case</code> branch is executed.</p> <p>The support for multiple parameters in <code>#case</code>, without the need for <code>#break</code>, not only reduces code but also eliminates potential errors from forgetting to include <code>#break</code>. Also, unlike Java syntax, neither <code>#case</code> nor <code>#default</code> uses a colon character.</p> <h3 id="_5-set-directive"><a href="#_5-set-directive" class="header-anchor">#</a> 5. <code>#set</code> Directive</h3> <p>The <code>#set</code> directive is used for variable declaration and assignment. It accepts only assignment expressions or a list of comma-separated assignment expressions. Code example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#set(x = 123)
#set(a = 1, b = 2, c = a + b)
#set(array[0] = 123)
#set(map[&quot;key&quot;] = 456)

#(x)  #(c)  #(array[0])  #(map.key)  #(map[&quot;key&quot;])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In the above code, the first line simply assigns 123 to x. The second line is a list of assignment expressions executed from left to right. If the right-hand side of the equation has an expression, it will be evaluated before assignment. The last line outputs the values of the variables, and other directives can also access these variables like the output directive.</p> <p>Note that the <code>#for</code>, <code>#include</code>, and <code>#define</code> directives create new variable scopes. The <code>#set</code> directive first looks for the variable in the current scope; if found, it operates on it, otherwise, it continues to the upper scope. If still not found, it defines the variable in the top-level scope. This design is very beneficial for variable value transmission within templates.</p> <p>To explicitly specify assignment in the current scope, you can use the <code>#setLocal</code> directive, which has the same parameters and usage as <code>#set</code> but operates only in the current scope. <code>#setLocal</code> is often used within <code>#define</code> and <code>#include</code> to avoid naming conflicts.</p> <p>Important: Since assignment expressions are essentially expressions, and other directives inherently support any expression, the <code>#set</code> directive is not mandatory for assignments. For example, assignments can be done in the <code>#()</code> output directive:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#(x = 123, y = &quot;abc&quot;, array = [1, &quot;a&quot;, true], map = {k1:v1}, null)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The code above uses multiple assignment expressions in the output directive to achieve the functionality of <code>#set</code>, ending with a null value to avoid any output. Similarly, other directives can also use assignment expressions.</p> <h3 id="_6-include-directive"><a href="#_6-include-directive" class="header-anchor">#</a> 6. <code>#include</code> Directive</h3> <p>The <code>#include</code> directive is used to include external template content, which is parsed as part of the current template. Code example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#include(&quot;sidebar.html&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The first parameter of the <code>#include</code> directive must be a String constant. If it starts with <code>/</code>, it will look for the file relative to <code>baseTemplatePath</code>; otherwise, it will look for the file relative to the current template's path.</p> <p><code>baseTemplatePath</code> can be configured in <code>configEngine(Engine me)</code> through <code>me.setBaseTemplatePath(...)</code>.</p> <p>Additionally, the <code>#include</code> directive supports an unlimited number of assignment expressions, which is very beneficial for modularization. For example, the template file named <code>_hot_list.html</code> is used to display hot projects, hot news, etc.:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;div class=&quot;hot-list&quot;&gt;
  &lt;h3&gt;#(title)&lt;/h3&gt;
  &lt;ul&gt;
    #for(x : list)
    &lt;li&gt;
      &lt;a href=&quot;#(url)/#(x.id)&quot;&gt;#(x.title)&lt;/a&gt;
    &lt;/li&gt;
    #end
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The variables <code>title</code>, <code>list</code>, and <code>url</code> in the HTML fragment are needed for rendering &quot;Hot Projects&quot; and &quot;Hot News&quot;:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#include(&quot;_hot_list.html&quot;, title=&quot;Hot Projects&quot;, list=projectList, url=&quot;/project&quot;)
#include(&quot;_hot_list.html&quot;, title=&quot;Hot News&quot;, list=newsList, url=&quot;/news&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In the two lines above, different values for <code>title</code>, <code>list</code>, and <code>url</code> are passed to <code>_hot_list.html</code>, enabling modular reuse of <code>_hot_list.html</code>.</p> <h3 id="_7-render-directive"><a href="#_7-render-directive" class="header-anchor">#</a> 7. <code>#render</code> Directive</h3> <p>The <code>#render</code> directive is nearly identical to <code>#include</code> in usage, supporting an unlimited number of assignment expressions. There are two main differences:</p> <ol><li><p><code>#render</code> supports dynamic template parameters, e.g., <code>#render(temp)</code>, where <code>temp</code> can be any expression. In contrast, <code>#include</code> can only use string constants like <code>#include(&quot;abc.html&quot;)</code>.</p></li> <li><p>Functions defined in <code>#render</code> using <code>#define</code> are only effective in its sub-template and are not valid in the parent template. This design is very beneficial for modularization.</p></li></ol> <p>The core purpose of introducing the <code>#render</code> directive is to support dynamic template parameters.</p> <h3 id="_8-define-directive"><a href="#_8-define-directive" class="header-anchor">#</a> 8. <code>#define</code> Directive</h3> <p>The <code>#define</code> directive is one of the main ways to extend the template engine. It allows you to define template functions (Template Functions). With <code>#define</code>, you can define reusable template segments as individual template functions, which can be customized by passing in parameters when called.</p> <p>Here's how to use <code>#define</code> to implement a layout feature. First, create a <code>layout.html</code> file with the following code:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#define layout()
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JFinal Club<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    #@content()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>In the code above, a template function named <code>layout</code> is defined using <code>#define layout()</code>. It ends with <code>#end</code>. Inside it, <code>#@content()</code> refers to another template function named <code>content</code>.</p> <p>Note: When calling a template function, an additional <code>@</code> symbol is used to differentiate it from directive calls.</p> <p>Next, create another template file as follows:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#include(&quot;layout.html&quot;)
#@layout()

#define content()
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  This is the template content, similar to the 'nested' part of traditional template engines.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The first line includes the previously created <code>layout.html</code>. The second line calls the <code>layout</code> template function defined in <code>layout.html</code>, which in turn calls the <code>content</code> function defined in the current file. Simply understand this as function definition and function invocation.</p> <p>To make a layout template reusable across many templates, you can set all the template functions in that file as shared by using <code>me.addSharedFunction(&quot;layout.html&quot;)</code> in <code>configEngine(Engine me)</code>. This eliminates the need for <code>#include</code>, reducing code redundancy and improving reusability.</p> <p>The Enjoy Template Engine eliminates boring concepts like <code>layout</code>, <code>nested</code>, and <code>macro</code>, thus reducing the learning curve and greatly enhancing extensibility.</p> <p>Template functions support formal parameters, similar to Java but without specifying the parameter type. Here's a code example:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#define test(a, b, c)
  #(a)
  #(b)
  #(c)
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>To call this function, you would use:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#@test(123, &quot;abc&quot;, user.name)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The number of formal and actual parameters should match. If you need to pass additional, optional parameters, you can use the <code>#set</code> directive beforehand.</p> <h3 id="_9-template-function-calls-and-call-directive"><a href="#_9-template-function-calls-and-call-directive" class="header-anchor">#</a> 9. Template Function Calls and <code>#call</code> Directive</h3> <p>To call a template function defined by <code>#define</code>, use <code>#@name(p1, p2…, pn)</code>. Note the additional <code>@</code> symbol to differentiate it from directive calls.</p> <p>Template functions also support safe invocation, denoted by <code>#@name?(p1, p2…, pn)</code>. Safe calls do nothing if the template function is not defined, making them suitable for optional template content. For example:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#define layout()
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/assets/css/jfinal.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    #@css?()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      #@main()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/assets/js/jfinal.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    #@js?()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
#end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>You can then define additional CSS or JS content through <code>#define css()</code> and <code>#define js()</code> in templates that require them.</p> <p>The <code>#call</code> directive is new in jfinal 3.6 and allows for dynamic specification of both the template function name and parameters. The usage is as follows:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#call(funcName, p1, p2, ..., pn)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To ignore the call if the function doesn't exist, add a constant value <code>true</code> as the first parameter:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#call(true, funcName, p1, p2, ..., pn)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This makes the template function calling mechanism much more flexible.</p> <h3 id="_10-date-directive"><a href="#_10-date-directive" class="header-anchor">#</a> 10. <code>#date</code> Directive</h3> <p>The <code>#date</code> directive is used for formatting the output of date-type data, including all objects that inherit from the Java Date class, such as Date and Timestamp. The usage is incredibly straightforward:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#date(account.createAt)
#date(account.createAt, &quot;yyyy-MM-dd HH:mm:ss&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In the first line of code, only one parameter is used, so the date is formatted using the default date pattern, which is &quot;yyyy-MM-dd HH:mm&quot;. In the second line, the date is formatted according to the pattern specified in the second parameter.</p> <p>If you want to change the default output format, you can configure it using <code>engine.setDatePattern()</code>.</p> <h4 id="keeppara-issue"><a href="#keeppara-issue" class="header-anchor">#</a> keepPara Issue</h4> <p>When a date-type field is submitted to the backend, and the backend uses the Controller's <code>keepPara()</code> method, it converts this date-type data into a String type. In such cases, using <code>#date(...)</code> to output this String will throw an exception. To handle this, you can 'keep' the type as shown below:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// keepPara() keeps all form submission data, converting them to String types.</span>
<span class="token function">keepPara</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use parameterized keepPara again to specify that the 'createAt' field should be kept as a Date type.</span>
<span class="token function">keepPara</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;createAt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>As shown above, the second line of code uses the <code>Date.class</code> parameter to specifically keep the 'createAt' field as a Date type. This way, the <code>#date(createAt)</code> directive on the page will not throw an exception. Methods like <code>keepModel(...)</code> and <code>keepBean(...)</code> will maintain the original types, so no additional handling is needed.</p> <h3 id="_11-number-directive"><a href="#_11-number-directive" class="header-anchor">#</a> 11. <code>#number</code> Directive</h3> <p>The <code>#number</code> directive is used to format the output of numerical data, including all objects that inherit from the Java Number class, such as Double, Float, Integer, Long, and BigDecimal. The usage is exceedingly simple:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#number(3.1415926, &quot;#.##&quot;)
#number(0.9518, &quot;#.##%&quot;)
#number(123456789, &quot;,###&quot;)
#number(300000, &quot;The speed of light is ### km per second.&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>In the above examples, the first parameter for the <code>#number</code> directive is of a numerical type, and the second parameter is a String pattern. The pattern parameter works the same way as the pattern used in Java's DecimalFormat class. If you're not sure how to use the pattern, you can search for &quot;DecimalFormat&quot; in a search engine to find plenty of resources.</p> <p>The two parameters for the <code>#number</code> directive can be variables or complex expressions. The use of constants in the above examples is merely for demonstration purposes.</p> <h3 id="_12-escape-directive"><a href="#_12-escape-directive" class="header-anchor">#</a> 12. <code>#escape</code> Directive</h3> <p>The <code>#escape</code> directive is used for HTML-safe output, helping to mitigate XSS attacks. It escapes characters like '&lt;' and '&gt;' in HTML-formatted data. For example, it would convert '&lt;' to <code>&amp;lt;</code> and a space to <code>&amp;nbsp;</code>.</p> <p>Used in a similar way to the output command:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#escape(blog.content)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_13-directive-extension"><a href="#_13-directive-extension" class="header-anchor">#</a> 13. Directive Extension</h3> <p>Thanks to the original DKFF and DLRD algorithms, the Enjoy Template Engine allows for extremely convenient extensions of directives at the language level. The amount of code required is minimal, and the learning curve is virtually non-existent. Here's a code example:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NowDirective</span> <span class="token keyword">extends</span> <span class="token class-name">Directive</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token class-name">Env</span> env<span class="token punctuation">,</span> <span class="token class-name">Scope</span> scope<span class="token punctuation">,</span> <span class="token class-name">Writer</span> writer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">write</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>In the above code, by extending the <code>Directive</code> class and implementing the <code>exec</code> method, a new <code>#now</code> directive is created with just three lines of code. This directive outputs the current date into the template. To use it, you only need to add it to the template engine using <code>me.addDirective(&quot;now&quot;, NowDirective.class)</code>. Here's how to use this directive in a template:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>The current date is: #now()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In addition to supporting directives without an <code>#end</code> block (i.e., directives without a body), the Enjoy Template Engine also directly supports directives that include an <code>#end</code> and a body. Here's an example:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Directive</span> <span class="token punctuation">{</span>

  <span class="token comment">// ExprList represents the list of parameter expressions for the directive</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setExprList</span><span class="token punctuation">(</span><span class="token class-name">ExprList</span> exprList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Custom control of exprList can be done here</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setExprList</span><span class="token punctuation">(</span>exprList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token class-name">Env</span> env<span class="token punctuation">,</span> <span class="token class-name">Scope</span> scope<span class="token punctuation">,</span> <span class="token class-name">Writer</span> writer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">write</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token string">&quot;Before executing body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stat<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> scope<span class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Execute body</span>
    <span class="token function">write</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token string">&quot;After executing body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// Returning true means this directive has an #end ending tag</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>In the example above, the <code>Demo</code> class extends <code>Directive</code> and overrides the <code>hasEnd</code> method, returning <code>true</code>. This indicates that the extended directive has an <code>#end</code> ending tag. The <code>exec</code> method contains three lines of code. The <code>stat.exec(...)</code> line executes the code within the directive's body. The lines before and after <code>stat.exec(...)</code> output a string, and the final output is a combination of all these.
Additionally the parameters of the directive can be controlled by overriding the setExprList(...) method of the parent class, which is not required.</p> <p>After adding to the engine via me.addDirective(&quot;demo&quot;, Demo.class), it can be used as in the following code example:
``
#demo()
Here is the content of the demo body
#end</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>The final output looks like this:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>body Before execution
Here is the content of the demo body
After body</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>The #demo directive body in the above example contains a string of characters that will be executed by stat.exec(...) in the Demo.exec(...) method, and write(...) before and after stat.exec(...). The results produced by the two method calls and the results produced by body generate the final result.
**Important**: Properties declared in directives are globally shared, so they must be thread-safe. For instance, consider a snippet from `com.jfinal.template.ext.directive.DateDirective`:

```java
public class DateDirective extends Directive {
	
   private Expr valueExpr;
   private Expr datePatternExpr;
   private int paraNum;
 
   ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Here, there are three properties of types <code>Expr</code>, <code>Expr</code>, and <code>int</code>. <code>Expr</code> is thread-safe. Although <code>int paraNum</code> may not seem thread-safe, it is only written to during initialization in the constructor, and read everywhere else. Thus, this <code>int</code> property is also thread-safe in this context.</p> <h3 id="_14-common-mistakes"><a href="#_14-common-mistakes" class="header-anchor">#</a> 14. Common Mistakes</h3> <p>The most common mistake when using the Enjoy Template Engine is confusing &quot;expressions&quot; and &quot;non-expressions.&quot; Expressions refer to everything within the parentheses when calling a directive or template function:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#directiveName(everything here is an expression)
#@functionName(everything here is an expression)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>For example, the correct usage is:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#directiveName(user.name)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>A common mistake would be:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>#directiveName( #(user.name) )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Simply put, this mistake involves using a directive where an expression should be used. Never use the '#' character within an expression; just use Java expressions directly.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/22/2023, 4:50:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jfinal-doc/en/6 Enjoy template engine/6.3 Expression.html" class="prev">
        6.3 Expressions
      </a></span> <span class="next"><a href="/jfinal-doc/en/6 Enjoy template engine/6.5 Comment.html">
        6.5 Comments
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/jfinal-doc/assets/js/app.425a107a.js" defer></script><script src="/jfinal-doc/assets/js/7.b0326031.js" defer></script><script src="/jfinal-doc/assets/js/1.1b1f549f.js" defer></script><script src="/jfinal-doc/assets/js/106.17af024d.js" defer></script><script src="/jfinal-doc/assets/js/20.0321efd6.js" defer></script>
  </body>
</html>
