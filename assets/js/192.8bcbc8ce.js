(window.webpackJsonp=window.webpackJsonp||[]).push([[192],{544:function(s,n,a){"use strict";a.r(n);var e=a(14),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_5-16-调用存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-16-调用存储过程"}},[s._v("#")]),s._v(" 5.16 调用存储过程")]),s._v(" "),n("p",[s._v("使用工具类 Db 可以很方便调用存储过程，以下是代码示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Db.execute((connection) -> {\n    CallableStatement cs = connection.prepareCall(...);\n    cs.setObject(1, ...);\n    cs.setObject(2, ...);\n    cs.execute();\n    cs.close();\n    return cs.getObject(1);\n});\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("如上所示，使用 Db.execute(...) 可以很方便去调用存储过程，其中的 connection 是一个 Connection 类型的对象，该对象在使用完以后，不必 close()，因为 jfinal 在上层会默认帮你 close() 掉。\n此外，MySQL 之下还可以使用更简单的方式调用存储过程：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 调用存储过程，查询 salary 表\nRecord first = Db.findFirst("CALL FindSalary (1,\\"201901\\")");\n \n// 调用存储过程，插入 salary 表\nint update2 = Db.update("CALL InsertSalary (3, 123)");\n \n// 调用存储过程，更新 salary 表\nint update = Db.update("CALL UpdateSalary (3, 99999)");\n \n// 调用存储过程，删除 salary 表\nint delete = Db.delete("CALL DeleteSalary(3)");\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);