(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{436:function(a,e,t){"use strict";t.r(e);var s=t(14),n=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"_3-8-renderfile-file-download"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-renderfile-file-download"}},[a._v("#")]),a._v(" 3.8 renderFile file download")]),a._v(" "),e("h3",{attrs:{id:"_1-basic-usage-of-renderfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-basic-usage-of-renderfile"}},[a._v("#")]),a._v(" 1. Basic Usage of "),e("code",[a._v("renderFile")])]),a._v(" "),e("p",[a._v("The "),e("code",[a._v("renderFile")]),a._v(" series of methods are used for file downloads.")]),a._v(" "),e("p",[a._v("The "),e("code",[a._v("renderFile")]),a._v(" method uses a "),e("code",[a._v("baseDownloadPath")]),a._v(" parameter as the base path to locate the file. In a standard maven project setup, this parameter defaults to the directory: "),e("code",[a._v("src/main/webapp/download")]),a._v(".")]),a._v(" "),e("p",[a._v("Here's how to use it under the default configuration:")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// The final downloaded file will be: src/main/webapp/download/file.zip")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("renderFile")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"file.zip"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// The final downloaded file will be: src/main/webapp/download/abc/def/file.zip")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("renderFile")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"abc/deb/file.zip"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("As shown above, the final downloaded file is always: "),e("code",[a._v("baseDownloadPath")]),a._v(" + the parameter passed into "),e("code",[a._v("renderFile")]),a._v(".")]),a._v(" "),e("p",[a._v("The existence of "),e("code",[a._v("baseDownloadPath")]),a._v(" effectively fixes a base path. "),e("code",[a._v("renderFile")]),a._v(" always uses this path as the base to locate the file.")]),a._v(" "),e("h3",{attrs:{id:"_2-configuring-basedownloadpath"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-configuring-basedownloadpath"}},[a._v("#")]),a._v(" 2. Configuring "),e("code",[a._v("baseDownloadPath")])]),a._v(" "),e("p",[e("code",[a._v("baseDownloadPath")]),a._v(" can also be freely configured in "),e("code",[a._v("configConstant(Constants me)")]),a._v(". For example:")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[a._v("me"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setBaseDownloadPath")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"files"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("In the context of a standard maven project, the "),e("code",[a._v("baseDownloadPath")]),a._v(" value from the configuration above will point to the directory "),e("code",[a._v("src/main/webapp/files")]),a._v(".")]),a._v(" "),e("p",[a._v("Additionally, "),e("code",[a._v("baseDownloadPath")]),a._v(" can also be configured as an absolute path, allowing it to point outside the project. For example:")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// For Linux/Mac systems, paths starting with "/" are absolute paths.')]),a._v("\nme"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setBaseDownloadPath")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/download"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// For Windows systems, paths starting with a drive letter are also absolute paths.")]),a._v("\nme"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setBaseDownloadPath")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:/download"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v('In the configuration above, in Linux, paths that start with "/" are considered absolute. So, '),e("code",[a._v("renderFile")]),a._v(' will look for the download file under the "/var/download" path.')]),a._v(" "),e("p",[a._v("This kind of configuration allows separation between project resources and download resources. It's also beneficial for cluster deployment (single-machine multi-instance deployment) where multiple nodes can share the same directory and the same set of downloadable files.")]),a._v(" "),e("h3",{attrs:{id:"_3-renderfile-file-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-renderfile-file-file"}},[a._v("#")]),a._v(" 3. "),e("code",[a._v("renderFile(File file)")])]),a._v(" "),e("p",[a._v("The "),e("code",[a._v("renderFile(File file)")]),a._v(" method directly uses the "),e("code",[a._v("File")]),a._v(" parameter to get the download file, freeing it from the constraints of "),e("code",[a._v("baseDownloadPath")]),a._v(". It can point to a file located anywhere, like:")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" file "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:/my-project/share/files/jfinal-all.zip"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("renderFile")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("As shown, the "),e("code",[a._v("File")]),a._v(" points to a file at an arbitrary location, bypassing the constraints of "),e("code",[a._v("baseDownloadPath")]),a._v(".")]),a._v(" "),e("h3",{attrs:{id:"_4-renaming-the-download-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-renaming-the-download-file"}},[a._v("#")]),a._v(" 4. Renaming the Download File")]),a._v(" "),e("p",[a._v("If you don't want to use the original filename of the download file, you can specify a new download filename:")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("renderFile")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"OldFileName.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"NewFileName.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v('In this way, users downloading the file will see it as "NewFileName.txt", regardless of its original name on the server.')])])}),[],!1,null,null,null);e.default=n.exports}}]);