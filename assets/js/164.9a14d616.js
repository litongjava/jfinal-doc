(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{518:function(s,n,e){"use strict";e.r(n);var t=e(14),a=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_2-9-propkit-读取配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-propkit-读取配置"}},[s._v("#")]),s._v(" 2.9 PropKit 读取配置")]),s._v(" "),n("p",[s._v("PropKit工具类用来读取外部键值对配置文件，PropKit可以极度方便地在系统任意时空使用，配置文件的格式如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("userName=james\nemail=no-reply@jfinal.com\ndevMode=true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如下是 PropKit 代码示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('PropKit.use("config.txt");\nString userName = PropKit.get("userName");\nString email = PropKit.get("email");\n \n// Prop 配合用法\nProp p = PropKit.use("config.txt");\nBoolean devMode = p.getBoolean("devMode");\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("如下是在项目中具体的使用示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('public class AppConfig extends JFinalConfig {\n  public void configConstant(Constants me) {\n    // 第一次使用use加载的配置将成为主配置，可以通过PropKit.get(...)直接取值\n    PropKit.use("a_little_config.txt");\n    me.setDevMode(PropKit.getBoolean("devMode"));\n  }\n \n  public void configPlugin(Plugins me) {\n    // 非第一次使用use加载的配置，需要通过每次使用use来指定配置文件名再来取值\n    String redisHost = PropKit.use("redis_config.txt").get("host");\n    int redisPort = PropKit.use("redis_config.txt").getInt("port");\n    RedisPlugin rp = new RedisPlugin("myRedis", redisHost, redisPort);\n    me.add(rp);\n \n    // 非第一次使用 use加载的配置，也可以先得到一个Prop对象，再通过该对象来获取值\n    Prop p = PropKit.use("db_config.txt");\n    DruidPlugin dp = new DruidPlugin(p.get("jdbcUrl"), p.get("user")…);\n    me.add(dp);\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("如上代码所示，PropKit可同时加载多个配置文件，第一个被加载的配置文件可以使用PorpKit.get(…)方法直接操作，非第一个被加载的配置文件则需要使用PropKit.use(…).get(…)来操作。")]),s._v(" "),n("p",[s._v("PropKit 的使用并不限于在 YourJFinalConfig 中，可以在项目的任何地方使用。此外PropKit.use(…)方法在加载配置文件内容以后会将数据缓存在内存之中，可以通过PropKit.useless(…)将缓存的内容进行清除。")])])}),[],!1,null,null,null);n.default=a.exports}}]);