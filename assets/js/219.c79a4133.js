(window.webpackJsonp=window.webpackJsonp||[]).push([[219],{573:function(s,e,n){"use strict";n.r(e);var a=n(14),i=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_8-2-redisplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-redisplugin"}},[s._v("#")]),s._v(" 8.2 RedisPlugin")]),s._v(" "),e("h3",{attrs:{id:"_1、基本配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、基本配置"}},[s._v("#")]),s._v(" 1､基本配置")]),s._v(" "),e("p",[s._v("RedisPlugin是作为JFinal的Plugin而存在的，所以使用时需要在JFinalConfig中配置RedisPlugin，以下是RedisPlugin配置示例代码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('public class DemoConfig extends JFinalConfig {\n  public void configPlugin(Plugins me) {\n    // 用于缓存bbs模块的redis服务\n    RedisPlugin bbsRedis = new RedisPlugin("bbs", "localhost");\n    me.add(bbsRedis);\n \n    // 用于缓存news模块的redis服务\n    RedisPlugin newsRedis = new RedisPlugin("news", "192.168.3.9");\n    me.add(newsRedis);\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v('以上代码创建了两个RedisPlugin对象，分别为bbsRedis和newsRedis。最先创建的RedisPlugin对象所持有的Cache对象将成为主缓存对象，主缓存对象可通过Redis.use()直接获取，否则需要提供cacheName参数才能获取，例如：Redis.use("news")')]),s._v(" "),e("h3",{attrs:{id:"_2、maven-坐标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、maven-坐标"}},[s._v("#")]),s._v(" 2、maven 坐标")]),s._v(" "),e("p",[s._v("使用 RedisPlugin 需要添加如下 maven 依赖：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>3.6.3</version>\n</dependency>\n \n<dependency>\n    <groupId>de.ruedigermoeller</groupId>\n    <artifactId>fst</artifactId>\n    <version>2.57</version>\x3c!-- 注意：更高版本不支持 jdk 8 --\x3e\n</dependency>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"_3、远程连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、远程连接"}},[s._v("#")]),s._v(" 3、远程连接")]),s._v(" "),e("p",[s._v("如果 reids 服务端处于远程的另一台服务器，那么需要修改其配置文件 /etc/redis.conf 中的部分配置才能连上：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 将原有的 bind 值由 127.0.0.1 改成 0.0.0.0\nbind 0.0.0.0\n \n# 添加 requirepass 配置，设置密码\nrequirepass 连接密码在此\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("配置完成以后，别忘了重启 reids：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# centos 操作系统的启动方式如下\nservice redis restart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("如果你使用的是云服务器，别忘了打开相应的端口号，reids 默认端口号是 6379。")]),s._v(" "),e("p",[s._v("最后，远程连接时的 RedisPlugin 在创建时要传入相应的密码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('RedisPlugin rp = new RedisPlugin("main", "xxx.com", 6379, 10000, "密码在此");\nme.add(rp);\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("以上 RedisPlugin 各参数最后一个是在 redis.config 中配置的密码，其后还支持更多参数，例如数据库：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('RedisPlugin rp = new RedisPlugin("main", "xxx.com", 6379, 10000, "密码在此", 数据库);\nme.add(rp);\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("根据需求选用参数即可。")])])}),[],!1,null,null,null);e.default=i.exports}}]);