(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{534:function(a,n,s){"use strict";s.r(n);var e=s(14),t=Object(e.a)({},(function(){var a=this,n=a._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"_3-3-action-参数注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-action-参数注入"}},[a._v("#")]),a._v(" 3.3 Action 参数注入")]),a._v(" "),n("p",[a._v("Action 参数注入是指为 action 方法传入参数，可以省去 getPara(...) 代码直接获得参数值，以下是代码示例：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('public class ProjectController extends Controller {\n    public void index(Project project) {\n       project.save();\n       render("index.html");\n    }\n}\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("p",[a._v("Action 参数注入可以代替 getPara、getBean、getModel 系列方法获取参数，使用 File、UploadFile 参数时可以代替 getFile 方法实现文件上传。这种传参方式还有一个好处是便于与 swagger 这类第三方无缝集成，生成API文档。")]),a._v(" "),n("p",[a._v("注意，如果不希望 Controller 带有参数的 public 方法成为一个 action，可以使用 @NotAction 注解将其标注来解决。")]),a._v(" "),n("p",[a._v('重要用法：如果 action 形参是一个 model 或者 bean，原先通过 getBean(User.class, "") 获取时第二个参数为空字符串或null，那么与之等价的形参注入只需要用一下 @Para("") 注解即可：')]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('public void action(@Para("")User user) { …. }\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("使用 Action 参数注入功能需要在开发工具中配置打开编译参数保留住方法参数名称。注意过于老旧的 eclipse 版本不支持 java 8 和该配置项，建议至少使用eclipse mars版本，以下是eclipse中的设置：\n"),n("img",{attrs:{src:"/jfinal-doc/3.3/1_20180112234714.png",alt:"9.png"}})]),a._v(" "),n("p",[a._v("检查项目属性配置的Java Build Path菜单下的Libraries下的java版本是否为1.8：\n"),n("img",{attrs:{src:"/jfinal-doc/3.3/1_20180112234750.png",alt:"10.png"}})]),a._v(" "),n("p",[a._v("检查项目属性配置的Project Facets菜单下的 java版本配置确定是否为1.8：\n"),n("img",{attrs:{src:"/jfinal-doc/3.3/1_20180112234838.png",alt:"11.png"}})]),a._v(" "),n("p",[a._v("注意：配置完成后，先将原有编译出来的class文件clear掉，并重新编译一次整个项目")]),a._v(" "),n("p",[a._v("如果使用IDEA，添加一个编译参数 -parameters即可，其配置方法如下：\n"),n("img",{attrs:{src:"/jfinal-doc/3.3/1_20180112235101.png",alt:"12.png"}})]),a._v(" "),n("p",[a._v("如果要使用maven插件进行编译，为maven-compiler-plugin编译插件配置一个"),n("compilerArgument",[a._v("-parameters")]),a._v(" 属性即可：\n"),n("img",{attrs:{src:"/jfinal-doc/3.3/1_20180112235151.png",alt:"13.png"}})],1),a._v(" "),n("p",[a._v("以上截图中的红色箭头指向部分是配置关键，以下 XML 配置内容与上面截图完全一样，提供出来便于复制使用：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("<plugin>\n   <groupId>org.apache.maven.plugins</groupId>\n   <artifactId>maven-compiler-plugin</artifactId>\n   <version>3.6.1</version>\n   <configuration>\n      <source>1.8</source>\n      <target>1.8</target>\n      <encoding>UTF-8</encoding>\n      \x3c!-- java8 保留参数名编译参数 --\x3e\n      <compilerArgument>-parameters</compilerArgument>\n   </configuration>\n</plugin>\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br")])]),n("p",[a._v("最后要注意：从 jfinal 3.5 版开始，已直接支持 action 参数注入功能，如果使用的 jfinal 3.2、3.3、3.4 这三个老版本希望支持该功能需要使用 jfinal 的 jfinal-java8 这个分支发行版，其 maven坐标如下：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("<dependency>\n    <groupId>com.jfinal</groupId>\n    <artifactId>jfinal-java8</artifactId>\n    <version>3.4</version>\n</dependency>\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("如果 jfinal 版本等于或高于 3.5 可以不必理会。")])])}),[],!1,null,null,null);n.default=t.exports}}]);