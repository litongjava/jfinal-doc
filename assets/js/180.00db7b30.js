(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{531:function(s,a,n){"use strict";n.r(a);var l=n(14),e=Object(l.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_4-4-clear"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-clear"}},[s._v("#")]),s._v(" 4.4 Clear")]),s._v(" "),a("p",[s._v("拦截器从上到下依次分为Global、Routes、Class、Method四个层次，Clear用于清除自身所处层次以上层的拦截器。")]),s._v(" "),a("p",[s._v("Clear声明在Method层时将针对Global、Routes、Class进行清除。Clear声明在Class层时将针对Global、Routes 进行清除。Clear注解携带参数时清除目标层中指定的拦截器。")]),s._v(" "),a("p",[s._v("Clear用法记忆技巧：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("一共有Global、Routes、Class、Method 四层拦截器")])]),s._v(" "),a("li",[a("p",[s._v("清除只针对Clear本身所处层的向上所有层，本层与下层不清除")])]),s._v(" "),a("li",[a("p",[s._v("不带参数时清除所有拦截器，带参时清除参数指定的拦截器")])])]),s._v(" "),a("p",[s._v("在某些应用场景之下，需要移除Global或Class拦截器。例如某个后台管理系统，配置了一个全局的权限拦截器，但是其登录action就必须清除掉她，否则无法完成登录操作，以下是代码示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// login方法需要移除该权限拦截器才能正常登录\n@Before(AuthInterceptor.class)\npublic class UserController extends Controller {\n    // AuthInterceptor 已被Clear清除掉，不会被其拦截\n    @Clear\n    public void login() {\n    }\n    \n    // 此方法将被AuthInterceptor拦截\n    public void show() {\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("Clear注解带有参数时，能清除指定的拦截器，以下是一个更加全面的示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("@Before(AAA.class)\npublic class UserController extends Controller {\n  @Clear\n  @Before(BBB.class)\n  public void login() {\n     // Global、Class级别的拦截器将被清除，但本方法上声明的BBB不受影响\n  }\n \n  @Clear({AAA.class, CCC.class})// 清除指定的拦截器AAA与CCC\n  @Before(CCC.class)\n  public void show() {\n     // 虽然Clear注解中指定清除CCC，但她无法被清除，因为清除操作只针对于本层以上的各层\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("上面的清除都用在了 method 上，还可以将其用于 class 之上，例如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("@Clear(AAA.class)\npublic class UserController {\n   public void index() {\n      ...\n   }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("如上所示，@Clear(AAA.class) 将清除上层也就是 Global、Route 这两层中配置的 AAA.java 这个拦截器。")])])}),[],!1,null,null,null);a.default=e.exports}}]);