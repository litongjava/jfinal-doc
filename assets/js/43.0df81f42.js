(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{408:function(e,t,a){"use strict";a.r(t);var s=a(14),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_11-3-i18ninterceptor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-i18ninterceptor"}},[e._v("#")]),e._v(" 11.3 I18nInterceptor")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("I18nInterceptor")]),e._v(" is a component provided for web applications to handle internationalization. Below is an example of how to use it in a Freemarker template:")]),e._v(" "),t("h3",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),t("p",[e._v("First, configure "),t("code",[e._v("I18nInterceptor")]),e._v(" as a global interceptor.")]),e._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("configInterceptor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Interceptors")]),e._v(" me"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  me"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("I18nInterceptor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h3",{attrs:{id:"usage-in-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-in-template"}},[e._v("#")]),e._v(" Usage in Template")]),e._v(" "),t("p",[e._v("Then, in the JFinal template engine, you can use the "),t("code",[e._v("_res")]),e._v(" object to get internationalized data.")]),e._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[e._v('#(_res.get("msg"))\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("The above code configures "),t("code",[e._v("I18nInterceptor")]),e._v(" to intercept action requests and allows the Freemarker template files to use an object named "),t("code",[e._v("_res")]),e._v(" to get internationalized data. The specific workflow of "),t("code",[e._v("I18nInterceptor")]),e._v(" is as follows:")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Tries to get the "),t("code",[e._v("locale")]),e._v(" parameter from the request using "),t("code",[e._v('controller.getPara("_locale")')]),e._v(". If obtained, it saves it in a cookie.")])]),e._v(" "),t("li",[t("p",[e._v("If "),t("code",[e._v('controller.getPara("_locale")')]),e._v(" does not get a value, it tries to get the "),t("code",[e._v("locale")]),e._v(" parameter from "),t("code",[e._v('controller.getCookie("_locale")')]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("If the above two steps still don't yield a "),t("code",[e._v("locale")]),e._v(" parameter value, the value of "),t("code",[e._v("I18n.defaultLocale")]),e._v(" is used as the "),t("code",[e._v("locale")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Using the "),t("code",[e._v("locale")]),e._v(" value obtained in the previous steps, "),t("code",[e._v("I18n.use(locale)")]),e._v(" is called to get a "),t("code",[e._v("Res")]),e._v(" object. This "),t("code",[e._v("Res")]),e._v(" object is then passed to the view using "),t("code",[e._v('controller.setAttr("_res", res)')]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("If "),t("code",[e._v("I18nInterceptor.isSwitchView")]),e._v(" is set to "),t("code",[e._v("true")]),e._v(", it will also change the rendered view, enabling the overall template file to switch. Details can be checked in the source code.")])])]),e._v(" "),t("h3",{attrs:{id:"customization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#customization"}},[e._v("#")]),e._v(" Customization")]),e._v(" "),t("p",[e._v('The variable names "_locale" and "_res" used in '),t("code",[e._v("I18nInterceptor")]),e._v(" can be specified when creating the "),t("code",[e._v("I18nInterceptor")]),e._v(" object. If not specified, default values will be used. You can also extend "),t("code",[e._v("I18nInterceptor")]),e._v(" and override methods like "),t("code",[e._v("getLocalPara")]),e._v(", "),t("code",[e._v("getResName")]),e._v(", and "),t("code",[e._v("getBaseName")]),e._v(" to implement more personalized features.")]),e._v(" "),t("h3",{attrs:{id:"advanced-usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#advanced-usage"}},[e._v("#")]),e._v(" Advanced Usage")]),e._v(" "),t("p",[e._v("In some web systems, the page requires a lot of text to be internationalized, and the CSS and HTML may also vary greatly due to internationalization. For such use-cases, you can create multiple sets of internationalized views with the same name and categorize these views in subdirectories based on "),t("code",[e._v("locale")]),e._v(". Finally, use the "),t("code",[e._v("I18nInterceptor")]),e._v(" to dynamically switch views based on the "),t("code",[e._v("locale")]),e._v(". You just need to set "),t("code",[e._v("I18nInterceptor.isSwitchView")]),e._v(" to "),t("code",[e._v("true")]),e._v(" to achieve this, saving time and effort.")])])}),[],!1,null,null,null);t.default=n.exports}}]);