(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{486:function(e,s,t){"use strict";t.r(s);var a=t(14),n=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"_9-2-cron4jplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-cron4jplugin"}},[e._v("#")]),e._v(" 9.2 Cron4jPlugin")]),e._v(" "),s("h3",{attrs:{id:"_1-basic-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-basic-configuration"}},[e._v("#")]),e._v(" 1. Basic Configuration")]),e._v(" "),s("p",[e._v("Cron4jPlugin exists as a plugin for JFinal, so it needs to be configured in JFinalConfig. Below is an example code snippet:")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Cron4jPlugin")]),e._v(" cp "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Cron4jPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\ncp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("addTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"* * * * *"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nme"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("cp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("As shown above, creating the plugin, passing parameters to "),s("code",[e._v("addTask")]),e._v(", and adding it to JFinal completes the basic configuration. The first parameter of "),s("code",[e._v("cp.addTask")]),e._v(" is the cron expression for task scheduling, and the second parameter is an implementation of the "),s("code",[e._v("Runnable")]),e._v(" interface. Cron4jPlugin will invoke the "),s("code",[e._v("run")]),e._v(" method in "),s("code",[e._v("MyTask")]),e._v(" according to the cron expression.")]),e._v(" "),s("p",[e._v("In the above example, besides using a "),s("code",[e._v("Runnable")]),e._v(" implementation for "),s("code",[e._v("MyTask")]),e._v(", you can also use an implementation of the "),s("code",[e._v("ITask")]),e._v(" interface. This interface has a "),s("code",[e._v("stop()")]),e._v(" method that will be called back when scheduling stops.")]),e._v(" "),s("h3",{attrs:{id:"_2-cron-expressions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-cron-expressions"}},[e._v("#")]),e._v(" 2. Cron Expressions")]),e._v(" "),s("p",[e._v("Cron expressions are used to customize scheduling rules. Unlike Quartz's cron expression, Cron4jPlugin's cron expression allows up to five parts, each separated by a space. These five parts represent minute, hour, day, month, and week, respectively, and have the following rules:")]),e._v(" "),s("ul",[s("li",[e._v("Minute: from 0 to 59")]),e._v(" "),s("li",[e._v("Hour: from 0 to 23")]),e._v(" "),s("li",[e._v("Day: from 1 to 31, the letter 'L' can represent the last day of the month")]),e._v(" "),s("li",[e._v('Month: from 1 to 12, can use aliases like "jan", "feb", "mar", etc.')]),e._v(" "),s("li",[e._v('Week: from 0 to 6, where 0 represents Sunday and 6 represents Saturday, can use aliases like "sun", "mon", "tue", etc.')])]),e._v(" "),s("p",[e._v("These five parts support various characters, including:")]),e._v(" "),s("ul",[s("li",[e._v("Number ( n ): Represents a specific time point, e.g., "),s("code",[e._v("5 * * * *")]),e._v(" means to execute at the 5th minute.")]),e._v(" "),s("li",[e._v("Comma ( , ): Specifies multiple values, e.g., "),s("code",[e._v("3,5 * * * *")]),e._v(" means to execute at the 3rd and 5th minutes.")]),e._v(" "),s("li",[e._v("Hyphen ( - ): Indicates a range, e.g., "),s("code",[e._v("1-3 * * * *")]),e._v(" means to execute at the 1st, 2nd, and 3rd minutes.")]),e._v(" "),s("li",[e._v("Asterisk ( * ): Means every time point, e.g., "),s("code",[e._v("* * * * *")]),e._v(" means to execute every minute.")]),e._v(" "),s("li",[e._v("Slash ( / ): Specifies an increment value, e.g., "),s("code",[e._v("*/5")]),e._v(" means to execute every 5 minutes.")])]),e._v(" "),s("h3",{attrs:{id:"common-mistakes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#common-mistakes"}},[e._v("#")]),e._v(" Common Mistakes:")]),e._v(" "),s("p",[e._v("The use of the slash character in cron4j differs slightly from Linux. For example, the expression "),s("code",[e._v("10/3 * * * *")]),e._v(" in Linux means to schedule every three minutes starting from the 10th minute, while in cron4j, you need to use "),s("code",[e._v("10-59/3 * * * *")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"frequently-asked-questions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frequently-asked-questions"}},[e._v("#")]),e._v(" Frequently Asked Questions:")]),e._v(" "),s("ol",[s("li",[e._v("If a task throws an exception, will it be scheduled again at its next scheduled time? The answer is yes.")]),e._v(" "),s("li",[e._v("If a task takes a long time to execute and hasn't finished by the time it's scheduled again, will it still be scheduled? The answer is also yes.")])]),e._v(" "),s("p",[e._v("In summary, each scheduling is independent; whether the last scheduling threw an exception or finished has no impact on the current scheduling.")]),e._v(" "),s("h3",{attrs:{id:"special-reminder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#special-reminder"}},[e._v("#")]),e._v(" Special Reminder:")]),e._v(" "),s("p",[e._v("Cron4jPlugin's cron expression, like Linux's, only has five parts, unlike Quartz's seven parts. Any 7-part cron expressions found online should not be used with Cron4jPlugin.")])])}),[],!1,null,null,null);s.default=n.exports}}]);