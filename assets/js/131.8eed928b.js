(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{484:function(s,n,a){"use strict";a.r(n);var e=a(14),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_1-3-jfinal-undertow-下部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-jfinal-undertow-下部署"}},[s._v("#")]),s._v(" 1.3 jfinal-undertow 下部署")]),s._v(" "),n("h3",{attrs:{id:"_1、指定打包为类型为-jar"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、指定打包为类型为-jar"}},[s._v("#")]),s._v(" 1、指定打包为类型为 jar")]),s._v(" "),n("p",[s._v("修改 pom.xml 文件，其中的 packaging 标签值要改成 jar")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<packaging>jar</packaging>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("强烈建议：强烈建议下载首页的 jfinal_demo_for_maven.zip，从中可以获取到本章所涉及的 pom.xml、package.xml、jfinal.sh 等配置文件与脚本文件。可以节省大量的学习成本。")]),s._v(" "),n("h3",{attrs:{id:"_2、添加-maven-jar-plugin-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加-maven-jar-plugin-插件"}},[s._v("#")]),s._v(" 2、添加 maven-jar-plugin 插件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\x3c!--\n\tjar 包中的配置文件优先级高于 config 目录下的 "同名文件"\n\t因此，打包时需要排除掉 jar 包中来自 src/main/resources 目录的\n\t配置文件，否则部署时 config 目录中的同名配置文件不会生效\n --\x3e\n<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-jar-plugin</artifactId>\n    <version>2.6</version>\n    <configuration>\n        <excludes>\n            <exclude>*.txt</exclude>\n            <exclude>*.xml</exclude>\n            <exclude>*.properties</exclude>\n            <exclude>exclude_file_name_here</exclude>\n            <exclude>exclude_path_here/</exclude>\n        </excludes>\n    </configuration>\n</plugin>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("maven-jar-plugin 仅为了避免将配置文件打入 jar 包，如果是打成 fatjar 包则不需要添加此插件")]),s._v(" "),n("h3",{attrs:{id:"_3、添加-maven-assembly-plugin-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、添加-maven-assembly-plugin-插件"}},[s._v("#")]),s._v(" 3、添加 maven-assembly-plugin 插件")]),s._v(" "),n("p",[s._v("修改 pom.xml ，在其中的 plugins 标签下面添加如下 maven-assembly-plugin 插件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\x3c!-- \n    使用 mvn clean package 打包 \n    更多配置可参考官司方文档：http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html\n--\x3e\n<plugin>\n  <groupId>org.apache.maven.plugins</groupId>\n  <artifactId>maven-assembly-plugin</artifactId>\n  <version>3.1.0</version>\n  <executions>\n    <execution>\n    <id>make-assembly</id>\n    <phase>package</phase>\n    <goals>\n      <goal>single</goal>\n    </goals>\n \n    <configuration>\n      \x3c!-- 打包生成的文件名 --\x3e\n      <finalName>${project.artifactId}</finalName>\n      \x3c!-- jar 等压缩文件在被打包进入 zip、tar.gz 时是否压缩，设置为 false 可加快打包速度 --\x3e\n      <recompressZippedFiles>false</recompressZippedFiles>\n      \x3c!-- 打包生成的文件是否要追加 release.xml 中定义的 id 值 --\x3e\n      <appendAssemblyId>true</appendAssemblyId>\n      \x3c!-- 指向打包描述文件 package.xml --\x3e\n      <descriptors>\n        <descriptor>package.xml</descriptor>\n      </descriptors>\n      \x3c!-- 打包结果输出的基础目录 --\x3e\n      <outputDirectory>${project.build.directory}/</outputDirectory>\n      </configuration>\n      </execution>\n    </executions>\n</plugin>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[s._v("maven-assembly-plugin 是 maven 官方提供的打包插件，功能十分完善，可以配置很多参数进行定制化构建，更详细的文件参考其官方文档：http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html")]),s._v(" "),n("h3",{attrs:{id:"_4、添加-package-xml-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、添加-package-xml-文件"}},[s._v("#")]),s._v(" 4、添加 package.xml 文件")]),s._v(" "),n("p",[s._v("在项目根目录下面添加 package.xml，该文件是在上述 maven-assembly-plugin 在 descriptor 标签中指定的打包描述文件，内容如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.0.0 http://maven.apache.org/xsd/assembly-2.0.0.xsd">\n\t\n  \x3c!-- \n    assembly 打包配置更多配置可参考官司方文档：\n    http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html\n  --\x3e\n\t\n  <id>release</id>\n\t\n  \x3c!--\n      设置打包格式，可同时设置多种格式，常用格式有：dir、zip、tar、tar.gz\n      dir 格式便于在本地测试打包结果\n      zip 格式便于 windows 系统下解压运行\n      tar、tar.gz 格式便于 linux 系统下解压运行\n  --\x3e\n  <formats>\n    <format>dir</format>\n    <format>zip</format>\n    \x3c!-- <format>tar.gz</format> --\x3e\n  </formats>\n \n  \x3c!-- 打 zip 设置为 true 时，会在 zip 包中生成一个根目录，打 dir 时设置为 false 少层目录 --\x3e\n  <includeBaseDirectory>true</includeBaseDirectory>\n\t\n  <fileSets>\n    \x3c!-- src/main/resources 全部 copy 到 config 目录下 --\x3e\n    <fileSet>\n      <directory>${basedir}/src/main/resources</directory>\n      <outputDirectory>config</outputDirectory>\n    </fileSet>\n\t\t\n    \x3c!-- src/main/webapp 全部 copy 到 webapp 目录下 --\x3e\n    <fileSet>\n      <directory>${basedir}/src/main/webapp</directory>\n      <outputDirectory>webapp</outputDirectory>\n    </fileSet>\n \n    \x3c!-- 项目根下面的脚本文件 copy 到根目录下 --\x3e\n    <fileSet>\n      <directory>${basedir}</directory>\n      <outputDirectory>./</outputDirectory>\n      <fileMode>755</fileMode>\n      <lineEnding>unix</lineEnding>\n      <includes>\n        <include>*.sh</include>\n      </includes>\n    </fileSet>\n    \n    <fileSet>\n      <directory>${basedir}</directory>\n      <outputDirectory>./</outputDirectory>\n      <fileMode>755</fileMode>\n      <lineEnding>windows</lineEnding>\n      <includes>\n        <include>*.bat</include>\n      </includes>\n    </fileSet>\n    \n  </fileSets>\t\n \n  \x3c!-- 依赖的 jar 包 copy 到 lib 目录下 --\x3e\n  <dependencySets>\n    <dependencySet>\n      <outputDirectory>lib</outputDirectory>\t\t\t\n    </dependencySet>\n  </dependencySets>\n\t\n</assembly>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br")])]),n("p",[s._v("打包描述文件是 maven-assembly-plugin 的一部分，描述文件可以非常方便地控制打包的各种细节动作，更详细的文档参考：http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html")]),s._v(" "),n("h3",{attrs:{id:"_5、在项目根目录下面添加启动脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、在项目根目录下面添加启动脚本"}},[s._v("#")]),s._v(" 5、在项目根目录下面添加启动脚本")]),s._v(" "),n("p",[s._v("注意：以下脚本文件在 jfinal 官网首页右侧下载的 jfinal demo for maven 项目中已经提供，复制其中的 jfinal.sh / jfinal.bat 到自己的项目中修改 MAIN_CLASS 变量值，即可投入使用。")]),s._v(" "),n("p",[s._v("Linux 下的启动脚本 jfinal.sh 内容如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#!/bin/bash\n# --------------------------------------------------------------\n#\n# 使用说明：\n# 1: 该脚本使用前需要首先修改 MAIN_CLASS 值，使其指向实际的启动类\n#\n# 2：使用命令行 ./jfinal.sh start | stop | restart 可启动/关闭/重启项目  \n#\n# 3: JAVA_OPTS 可通过 -D 传入 undertow.port 与 undertow.host 这类参数覆盖\n#    配置文件中的相同值此外还有 undertow.resourcePath、undertow.ioThreads、\n#    undertow.workerThreads 共五个参数可通过 -D 进行传入，该功能尽可能减少了\n#    修改 undertow 配置文件的必要性\n#\n# 4: JAVA_OPTS 可传入标准的 java 命令行参数，例如 -Xms256m -Xmx1024m 这类常用参数\n#\n# 5: 函数 start() 给出了 4 种启动项目的命令行，根据注释中的提示自行选择合适的方式\n#\n# --------------------------------------------------------------\n \n# 启动入口类，该脚本文件用于别的项目时要改这里\nMAIN_CLASS=com.yourpackage.YourMainClass\n \nif [[ "$MAIN_CLASS" == "com.yourpackage.YourMainClass" ]]; then\n    echo "请先修改 MAIN_CLASS 的值为你自己项目启动Class，然后再执行此脚本。"\n\texit 0\nfi\n \nCOMMAND="$1"\n \nif [[ "$COMMAND" != "start" ]] && [[ "$COMMAND" != "stop" ]] && [[ "$COMMAND" != "restart" ]]; then\n\techo "Usage: $0 start | stop | restart"\n\texit 0\nfi\n \n \n# Java 命令行参数，根据需要开启下面的配置，改成自己需要的，注意等号前后不能有空格\n# JAVA_OPTS="-Xms256m -Xmx1024m -Dundertow.port=80 -Dundertow.host=0.0.0.0"\n# JAVA_OPTS="-Dundertow.port=80 -Dundertow.host=0.0.0.0"\n \n# 生成 class path 值\nAPP_BASE_PATH=$(cd `dirname $0`; pwd)\nCP=${APP_BASE_PATH}/config:${APP_BASE_PATH}/lib/*\n \nfunction start()\n{\n    # 运行为后台进程，并在控制台输出信息\n    java -Xverify:none ${JAVA_OPTS} -cp ${CP} ${MAIN_CLASS} &\n \n    # 运行为后台进程，并且不在控制台输出信息\n    # nohup java -Xverify:none ${JAVA_OPTS} -cp ${CP} ${MAIN_CLASS} >/dev/null 2>&1 &\n \n    # 运行为后台进程，并且将信息输出到 output.log 文件\n    # nohup java -Xverify:none ${JAVA_OPTS} -cp ${CP} ${MAIN_CLASS} > output.log &\n \n    # 运行为非后台进程，多用于开发阶段，快捷键 ctrl + c 可停止服务\n    # java -Xverify:none ${JAVA_OPTS} -cp ${CP} ${MAIN_CLASS}\n}\n \nfunction stop()\n{\n    # 支持集群部署\n    kill `pgrep -f ${APP_BASE_PATH}` 2>/dev/null\n    \n    # kill 命令不使用 -9 参数时，会回调 onStop() 方法，确定不需要此回调建议使用 -9 参数\n    # kill `pgrep -f ${MAIN_CLASS}` 2>/dev/null\n \n    # 以下代码与上述代码等价\n    # kill $(pgrep -f ${MAIN_CLASS}) 2>/dev/null\n}\n \nif [[ "$COMMAND" == "start" ]]; then\n\tstart\nelif [[ "$COMMAND" == "stop" ]]; then\n    stop\nelse\n    stop\n    start\nfi\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br")])]),n("p",[s._v("注意要首先根据项目入口类，修改一下上面内容中的 MAIN_CLASS 变量值，Windows 下的 jfinal.bat 脚本也同样如此")]),s._v(" "),n("p",[s._v("启动项目命令：./jfinal.sh start")]),s._v(" "),n("p",[s._v("关闭项目命令：./jfinal.sh stop")]),s._v(" "),n("p",[s._v("重启项目命令：./jfinal.sh restart")]),s._v(" "),n("p",[s._v("特别注意：使用以上命令行时，先要使用 mvn clean package 将项目打包，然后使用 cd 命令跳转到打好的包的目录下面执行命令。而不是 cd 跳转到项目根目录下面去执行命令，很多人犯这种错误。打包方法见紧接着的下一小节《6、打包》")]),s._v(" "),n("p",[s._v("限于篇幅在此不再贴出 windows 脚本内容，可下载官网首页右侧的 jfinal demo 获取。最新版本的脚本在此可以下载到：https://gitee.com/jfinal/jfinal-undertow")]),s._v(" "),n("p",[s._v("windows 脚本的使用方法如下：")]),s._v(" "),n("p",[s._v("启动项目命令：jfinal.bat start")]),s._v(" "),n("p",[s._v("关闭项目命令：jfinal.bat stop")]),s._v(" "),n("p",[s._v("重启项目命令：jfinal.bat restart")]),s._v(" "),n("p",[s._v("注意：linux、mac 下的脚本文件换行字符必须是 '\\n'，而 windows 下必须是 \"\\r\\n\"，否则脚本无法执行，并会输出无法理解的错误信息，难以排错。如何查看脚本文件中的换行字符见文档：https://www.jfinal.com/doc/1-5")]),s._v(" "),n("p",[s._v("强烈建议：强烈建议下载首页的 jfinal_demo_for_maven.zip，从中可以获取到以上 5 小节所涉及的 pom.xml、package.xml、jfinal.sh 等配置文件与脚本文件。确保下载到最新版本。")]),s._v(" "),n("h3",{attrs:{id:"_6、打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、打包"}},[s._v("#")]),s._v(" 6、打包")]),s._v(" "),n("p",[s._v("打开命令行终端，cd 命令进入项目根目录，运行以下命令即可打包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mvn clean package\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("执行上述打包命令以后，在项目根下面的 target 目录下面会出现打好的 xxx.zip，解压该 zip 文件使用命令行 ./jfinal.sh start 即可运行")]),s._v(" "),n("p",[s._v("除了 zip 文件还会在 target 下面生成一个目录，在该目录下面使用命令行 ./jfinal.sh start 可启动项目，该目录下面的内容与 zip 文件中的内容是完全一样的。")]),s._v(" "),n("h3",{attrs:{id:"_7、部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、部署"}},[s._v("#")]),s._v(" 7、部署")]),s._v(" "),n("p",[s._v("将上述打包命令生成的 zip 文件上传到服务器并解压即完成了部署工作，基于 jfinal-undertow 开发项目的最大优势就是不需要下载、安装、配置 tomcat 这类 server")]),s._v(" "),n("h3",{attrs:{id:"_8、fatjar-打包部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8、fatjar-打包部署"}},[s._v("#")]),s._v(" 8、fatjar 打包部署")]),s._v(" "),n("p",[s._v("fatjar 打包是指将项目中所有 class、所有资源以及所有 jar 包依赖全部打包到一个单独的 jar 包之中，打包好的独立 jar 包可以很方便复制、部署、运行，非常适合于做微服务项目开发，也很适合没有 web 资源或者 web 资源很少的项目")]),s._v(" "),n("p",[s._v("具体的用法可以在官网首页下载 jfinal-demo-for-maven，其中的 doc 目录下面有文档详细介绍了此方法，后续会在文档频道添加 fatjar 打包方法")]),s._v(" "),n("h3",{attrs:{id:"_9、jfinal-undertow-的主要优势"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9、jfinal-undertow-的主要优势"}},[s._v("#")]),s._v(" 9、jfinal-undertow 的主要优势")]),s._v(" "),n("p",[s._v("1：极速启动，启动速度比 tomcat 快 5 到 8 倍。jfinal.com 官网启动时间在 1.5 秒内")]),s._v(" "),n("p",[s._v("2：Undertow 是红帽公司的开源产品，是 Wildfly 默认的 Web 服务器，Java Web 服务器市场占有率高于 Jetty，仅次于 Tomcat")]),s._v(" "),n("p",[s._v("3：极简精妙的热部署设计，实现极速轻量级热部署，让开发体验再次提升一个档次")]),s._v(" "),n("p",[s._v("4：性能高于 tomcat、jetty，可替代 tomcat、jetty 用于生产环境")]),s._v(" "),n("p",[s._v("5：undertow 为嵌入式而生，可直接用于生产环境部署，部署时无需下载服务，无需配置服务，十分适合微服务开发、部署")]),s._v(" "),n("p",[s._v("6：告别 web.xml、告别 tomcat、告别 jetty，节省大量打包与部署时间。令开发、打包、部署成为一件开心的事")]),s._v(" "),n("p",[s._v("7：功能丰富，支持 classHotSwap、WebSocket、gzip 压缩、servlet、filter、sessionHotSwap 等功能")]),s._v(" "),n("p",[s._v("8：支持 fatjar 与 非 fatjar 打包模式，便于支持微服务")]),s._v(" "),n("p",[s._v("9：开发、打包、部署一体化，整个过程无需对项目中的任何地方进行调整或修改，真正实现从极速开发到极速部署")])])}),[],!1,null,null,null);n.default=t.exports}}]);