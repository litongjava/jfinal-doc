(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{476:function(e,t,s){"use strict";s.r(t);var n=s(14),a=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"_6-9-extension-method-extension"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-9-extension-method-extension"}},[e._v("#")]),e._v(" 6.9 Extension Method Extension")]),e._v(" "),t("p",[e._v('The Extension Method is used to add extension methods to existing classes externally. This feature is similar to the "mixin" feature in the Ruby language.')]),e._v(" "),t("p",[e._v("By default, Enjoy has added 9 extension methods ("),t("code",[e._v("toBigDecimal()")]),e._v(", "),t("code",[e._v("toBigInteger()")]),e._v(", "),t("code",[e._v("toInt()")]),e._v(", "),t("code",[e._v("toLong()")]),e._v(", "),t("code",[e._v("toFloat()")]),e._v(", "),t("code",[e._v("toDouble()")]),e._v(", "),t("code",[e._v("toBoolean()")]),e._v(", "),t("code",[e._v("toShort()")]),e._v(", "),t("code",[e._v("toByte()")]),e._v(") for 9 commonly used Java types: "),t("code",[e._v("BigDecimal")]),e._v(", "),t("code",[e._v("BigInteger")]),e._v(", "),t("code",[e._v("String")]),e._v(", "),t("code",[e._v("Integer")]),e._v(", "),t("code",[e._v("Long")]),e._v(", "),t("code",[e._v("Float")]),e._v(", "),t("code",[e._v("Double")]),e._v(", "),t("code",[e._v("Short")]),e._v(", and "),t("code",[e._v("Byte")]),e._v(". Below is an example of how to use them:")]),e._v(" "),t("div",{staticClass:"language-plaintext line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plaintext"}},[t("code",[e._v('#set(age = "18")\n#if(age.toInt() >= 18)\n   join to the party\n#end\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("In the first line of the example above, "),t("code",[e._v("age")]),e._v(" is of type "),t("code",[e._v("String")]),e._v(". Since "),t("code",[e._v("String")]),e._v(" has been extended with the "),t("code",[e._v("toInt()")]),e._v(" method, it can be called to compare it with the "),t("code",[e._v("Integer")]),e._v(" value 18.")]),e._v(" "),t("p",[t("strong",[e._v("Note")]),e._v(": "),t("code",[e._v("BigDecimal")]),e._v(" and "),t("code",[e._v("BigInteger")]),e._v(" were added in version 5.1.2. You will need to upgrade to this version or extend it yourself.")]),e._v(" "),t("p",[e._v("Extension Method has two main application scenarios. The first is to extend the functionality of existing classes in the Java library. Below is an example of adding extension methods to the "),t("code",[e._v("Integer")]),e._v(" class:")]),e._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyIntegerExt")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Integer")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("square")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Integer")]),e._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" self "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Double")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("power")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Integer")]),e._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Double")]),e._v(" exponent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Math")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("pow")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" exponent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Boolean")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("isOdd")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Integer")]),e._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" self "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("%")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br")])]),t("p",[e._v("As shown in the code above, the first parameter of the three extension methods must be of type "),t("code",[e._v("Integer")]),e._v(", so that this parameter can hold the caller itself when the method is called. The remaining parameters can be of any type, as demonstrated by the "),t("code",[e._v("exponent")]),e._v(" parameter in the "),t("code",[e._v("power")]),e._v(" method. Extension methods must have at least one parameter. The following code configures these extension methods:")]),e._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Engine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("addExtensionMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyIntegerExt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("After this simple two-step process, you can use the extension methods in the template:")]),e._v(" "),t("div",{staticClass:"language-plaintext line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plaintext"}},[t("code",[e._v("#set(num = 123)\n#(num.square())\n#(num.power(10D))\n#(num.isOdd())\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("The second, third, and fourth lines in the example above call the three extension methods in "),t("code",[e._v("MyIntegerExt")]),e._v(", implementing the square, the 10th power, and odd number check for 123.")]),e._v(" "),t("p",[e._v("As shown in the examples above, extension methods allow you to extend the functionality of classes outside of themselves, making their usage in templates very convenient.")]),e._v(" "),t("p",[e._v("The second important application scenario for Extension Method is to make uncertain types certain. For example, the "),t("code",[e._v("Controller.keepPara()")]),e._v(" method treats all parameters as "),t("code",[e._v("String")]),e._v(" types. So, an "),t("code",[e._v("Integer")]),e._v(" type from a form will turn into a "),t("code",[e._v("String")]),e._v(" after "),t("code",[e._v("keepPara()")]),e._v(", triggering a type mismatch exception in the template. Here's how to resolve this:")]),e._v(" "),t("div",{staticClass:"language-plaintext line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plaintext"}},[t("code",[e._v('<select name="type">\n  #for(x : list)\n    <option value="#(x.type)" #if(x.type == type.toInt()) selected #end />\n  #end\n</select>\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("Assuming "),t("code",[e._v("type")]),e._v(" is of "),t("code",[e._v("Integer")]),e._v(" type, the "),t("code",[e._v("select")]),e._v(" field will turn "),t("code",[e._v("type")]),e._v(" into a "),t("code",[e._v("String")]),e._v(" after submitting the form and using "),t("code",[e._v("keepPara()")]),e._v(" on the backend. To re-render the template without causing a type mismatch, use "),t("code",[e._v("type.toInt()")]),e._v(". Of course, you can also resolve this by using "),t("code",[e._v("keepPara(Integer.class, “type”)")]),e._v(".")])])}),[],!1,null,null,null);t.default=a.exports}}]);