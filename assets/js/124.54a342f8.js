(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{487:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_9-3-using-external-configuration-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-using-external-configuration-files"}},[t._v("#")]),t._v(" 9.3 Using External Configuration Files")]),t._v(" "),a("p",[t._v("The previous example only showed the Java hard-coded configuration. In more application scenarios, external configuration files are used for flexible scheduling strategies, making it easier to change the scheduling strategy at any time. Below is an example code for external configuration:")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("cron4j")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("task1, task2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task1.cron")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("* * * * *")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task1.class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("com.xxx.TaskAaa")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task1.daemon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task1.enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task2.cron")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("* * * * *")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task2.class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("com.xxx.TaskBbb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task2.daemon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("task2.enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("In the above example, "),a("code",[t._v("cron4j")]),t._v(" is what's called the configuration name or "),a("code",[t._v("configName")]),t._v(". You can name it as you like. This name will be used when creating the "),a("code",[t._v("Cron4jPlugin")]),t._v(" object. If a name is not provided when creating the "),a("code",[t._v("Cron4jPlugin")]),t._v(' object, the default value is "cron4j".')]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("configName")]),t._v(" is immediately followed by "),a("code",[t._v("task1")]),t._v(" and "),a("code",[t._v("task2")]),t._v(", which represent the names of two tasks in the current configuration. These names specify that subsequent configurations will start with them, for example, "),a("code",[t._v("task1.cron")]),t._v(", "),a("code",[t._v("task2.cron")]),t._v(" all start with these task names.")]),t._v(" "),a("p",[a("code",[t._v("task1.cron")]),t._v(" specifies the cron expression for the task, "),a("code",[t._v("task1.class")]),t._v(" specifies the target Java class for the task that needs to implement the "),a("code",[t._v("Runnable")]),t._v(" interface, "),a("code",[t._v("task1.daemon")]),t._v(" specifies whether the scheduled task thread is a daemon thread, and "),a("code",[t._v("task1.enable")]),t._v(" specifies whether the task is enabled or disabled. This last configuration is optional and can be omitted; if omitted, it defaults to enabled. The configuration for "),a("code",[t._v("task2")]),t._v(" has the same meaning as for "),a("code",[t._v("task1")]),t._v("; only the task names differ.")]),t._v(" "),a("p",[t._v("In summary, "),a("code",[t._v("configName")]),t._v(" specifies "),a("code",[t._v("taskName")]),t._v(", multiple "),a("code",[t._v("taskNames")]),t._v(" can be separated by commas, and each "),a("code",[t._v("taskName")]),t._v(" specifies a specific task. Each specific task has four configurations: cron, class, daemon, and enable, each configuration starts with "),a("code",[t._v("taskName")]),t._v(".")]),t._v(" "),a("p",[t._v("Assuming the configuration file name is "),a("code",[t._v("config.txt")]),t._v(", the creation of "),a("code",[t._v("Cron4jPlugin")]),t._v(" after the configuration can be as follows:")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("cp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cron4jPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cron4jPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cron4j"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \ncp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cron4jPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PropKit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cron4jPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PropKit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cron4j"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \nme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("In the code above, the first four lines are four ways to create a "),a("code",[t._v("Cron4jPlugin")]),t._v(" object using a configuration file. The first line only passes in the configuration file name, omitting the "),a("code",[t._v("configName")]),t._v(', so the default value is "cron4j". The second line is essentially the same as the first, except that it specifies its '),a("code",[t._v("configName")]),t._v(". The third and fourth lines are similar to the first two, except that they use "),a("code",[t._v("PropKit")]),t._v(" for loading.")]),t._v(" "),a("p",[t._v("Please note: The "),a("code",[t._v("configName")]),t._v(' mentioned here is the "cron4j" in the example configuration item '),a("code",[t._v("cron4j=task1, task2")]),t._v(". This "),a("code",[t._v("configName")]),t._v(" is essentially the entry point that "),a("code",[t._v("Cron4jPlugin")]),t._v(" looks for in the configuration.")])])}),[],!1,null,null,null);a.default=n.exports}}]);