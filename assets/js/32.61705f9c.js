(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{397:function(e,t,s){"use strict";s.r(t);var n=s(14),a=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_1-4-advanced-usage-of-jfinal-undertow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-advanced-usage-of-jfinal-undertow"}},[e._v("#")]),e._v(" 1.4 Advanced Usage of jfinal-undertow")]),e._v(" "),t("h2",{attrs:{id:"i-basic-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#i-basic-configuration"}},[e._v("#")]),e._v(" I. Basic Configuration")]),e._v(" "),t("h3",{attrs:{id:"_1-enable-configuration-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-enable-configuration-file"}},[e._v("#")]),e._v(" 1. Enable Configuration File")]),e._v(" "),t("p",[e._v("Create an "),t("code",[e._v("undertow.txt")]),e._v(" file in the "),t("code",[e._v("src/main/resources")]),e._v(" directory. This file will be automatically loaded by jfinal undertow and configure it.")]),e._v(" "),t("p",[e._v('If you prefer not to use the filename "undertow.txt", you can specify your desired filename by passing it as the second parameter of the '),t("code",[e._v('UndertowServer.create(AppConfig.class, "other.txt")')]),e._v(" method.")]),e._v(" "),t("p",[e._v("Once the configuration file is created, you can refer to the following documentation to set up the respective functionalities.")]),e._v(" "),t("h3",{attrs:{id:"_2-common-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-common-configurations"}},[e._v("#")]),e._v(" 2. Common Configurations")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 'true' enables hot reloading\nundertow.devMode=true\nundertow.port=80\nundertow.host=0.0.0.0\n \n# In most cases, it's not recommended to set the context path\nundertow.contextPath=/abc\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("Set to 'true' during development to enable hot reloading. Note that this "),t("code",[e._v("devMode")]),e._v(" is unrelated to the "),t("code",[e._v("devMode")]),e._v(" in the jfinal project. Please differentiate between them.")]),e._v(" "),t("p",[e._v("Important: The default value for the older version of "),t("code",[e._v("undertow.host")]),e._v(" is "),t("code",[e._v("localhost")]),e._v(". Due to security settings on Linux, projects deployed under localhost may not be accessible from the public internet. Adjust the setting to "),t("code",[e._v("undertow.host=0.0.0.0")]),e._v(". If you're using nginx as a proxy, you can keep the "),t("code",[e._v("localhost")]),e._v(" setting.")]),e._v(" "),t("h3",{attrs:{id:"_3-web-resource-load-path-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-web-resource-load-path-configuration"}},[e._v("#")]),e._v(" 3. Web Resource Load Path Configuration")]),e._v(" "),t("p",[e._v("jfinal undertow can easily load web static resources from the file system directory, class path, or jar packages. Here's a configuration example:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("undertow.resourcePath = src/main/webapp, classpath:static\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v('As shown above, "src/main/webapp" indicates loading web static resources from the "src/main/webapp" directory in the project root. "classpath:static" signifies loading web static resources from the static path in the class path or jar packages.')]),e._v(" "),t("p",[e._v('Note: The configuration "classpath:static" was added in jfinal undertow 1.5.')]),e._v(" "),t("p",[e._v("Another key point about "),t("code",[e._v("undertow.resourcePath")]),e._v(' is that configurations prefixed with "classpath:" require manual validation of the existence of the path. It\'s preferable to only specify existing paths. Configurations without the "classpath:" prefix can have both the development and deployment paths configured (separated by commas). jfinal undertow will check the existence of paths at runtime and only activate them if they exist. This is convenient for a one-time configuration suitable for both development and production environments.')]),e._v(" "),t("p",[e._v("Important: "),t("code",[e._v("PathKit.getWebRootPath()")]),e._v(" will point to the first valid directory in the "),t("code",[e._v("undertow.resourcePath")]),e._v(" configuration. The "),t("code",[e._v("engine")]),e._v(" object in the "),t("code",[e._v("configEngine(Engine engine)")]),e._v(" method has already been set by default to "),t("code",[e._v("engine.setBaseTemplatePath(PathKit.getWebRootPath())")]),e._v(". So, this configuration is related to the engine's "),t("code",[e._v("baseTemplatePath")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"_4-performance-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-performance-configuration"}},[e._v("#")]),e._v(" 4. Performance Configuration")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Number of io threads and worker threads\n# undertow.ioThreads=\n# undertow.workerThreads=\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("The default configuration has been optimized for common use cases. Without performance test data as guidance, it's recommended to stick to the default settings and avoid adding these configurations.")]),e._v(" "),t("p",[t("code",[e._v("ioThreads")]),e._v(" represents the number of NIO threads handling io requests. In a production environment, it's suggested to set this between one to two times the number of CPU cores. Adjustments should be based on performance test results.")]),e._v(" "),t("p",[t("code",[e._v("workerThreads")]),e._v(" denotes the number of threads processing requests. In production, the default setting can be used, or adjustments can be made based on performance tests. When performance reaches a certain level, increasing the value of "),t("code",[e._v("workThreads")]),e._v(" won't lead to performance improvements but will increase system resource consumption.")]),e._v(" "),t("h3",{attrs:{id:"_5-enable-gzip-compression"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-enable-gzip-compression"}},[e._v("#")]),e._v(" 5. Enable gzip Compression")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# gzip compression switch\nundertow.gzip.enable=true\n# Set compression level, default is -1. Can be set between 1 and 9. 1 has the fastest compression speed, 9 has the highest compression rate.\nundertow.gzip.level=-1\n# Minimum content length to trigger compression\nundertow.gzip.minLength=1024\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("Enabling gzip compression can reduce network traffic and improve access speed.")]),e._v(" "),t("h3",{attrs:{id:"_6-session-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-session-configuration"}},[e._v("#")]),e._v(" 6. Session Configuration")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Session expiration time, note the unit is in seconds.\nundertow.session.timeout=1800\n# Support session hot reloading to avoid repeated logins for projects dependent on sessions. Default is true. Only for devMode, no impact in production.\nundertow.session.hotSwap=true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h3",{attrs:{id:"_7-https-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-https-configuration"}},[e._v("#")]),e._v(" 7. HTTPS Configuration")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Whether to enable ssl\nundertow.ssl.enable=false\n# ssl listening port, set to 443 in a production environment\nundertow.ssl.port=443\n# Keystore type, recommended to use PKCS12\nundertow.ssl.keyStoreType=PKCS12\n# Keystore file\nundertow.ssl.keyStore=demo.pfx\n# Keystore password\nundertow.ssl.keyStorePassword=123456\n# Alias configuration, generally not used\nundertow.ssl.keyAlias=demo\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br")])]),t("p",[e._v("Instructions on obtaining an SSL certificate can be found in the following subsection.")]),e._v(" "),t("h3",{attrs:{id:"_8-http2-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-http2-configuration"}},[e._v("#")]),e._v(" 8. HTTP2 Configuration")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Whether to enable http2 when ssl is on. To check if this configuration is active, enter in the Chrome address bar: chrome://net-internals/#http2\nundertow.http2.enable=true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("Enabling http2 can significantly speed up access. You don't need to worry about https being slower than http.")]),e._v(" "),t("h3",{attrs:{id:"_9-redirecting-http-to-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-redirecting-http-to-https"}},[e._v("#")]),e._v(" 9. Redirecting HTTP to HTTPS")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# When ssl is enabled, should http requests redirect to https?\nundertow.http.toHttps=false\n# When ssl is enabled, the status code used for redirecting http requests to https. Default value is 302.\nundertow.http.toHttpsStatusCode=302\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h3",{attrs:{id:"_10-disable-http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-disable-http"}},[e._v("#")]),e._v(" 10. Disable HTTP")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Whether to disable http when ssl is on\nundertow.http.disable=false\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("After enabling https, you can configure to disable http, so only https can be accessed. This configuration is suitable for mini-program servers.")]),e._v(" "),t("p",[e._v("For general web projects, it's not recommended to use this configuration. Instead, set "),t("code",[e._v("undertow.http.toHttps=true")]),e._v(" to redirect http to https.")]),e._v(" "),t("h3",{attrs:{id:"_11-freely-configure-undertow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-freely-configure-undertow"}},[e._v("#")]),e._v(" 11. Freely Configure Undertow")]),e._v(" "),t("p",[e._v("The above configurations are directly supported by jfinal undertow. If these configurations don't meet your requirements, you can freely configure undertow as follows:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("UndertowServer.create(YourJFinalConfig.class)\n    .onStart( builder -> {\n        builder.setServerOption(UndertowOptions.PARAMETER_NAME, PARAMETER_VALUE);\t\n     })\n    .start();\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("As shown above, using the "),t("code",[e._v("onStart")]),e._v(" method and calling "),t("code",[e._v("builder.setServerOption(...)")]),e._v(" allows for deeper configuration of undertow. You can also call other APIs in the builder for different types of configurations. "),t("code",[e._v("UndertowOptions")]),e._v(" defines many undertow configuration names. Check its documentation comments to find many useful configurations.")]),e._v(" "),t("h3",{attrs:{id:"_12-add-filter-websocket-servlet-listener"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-add-filter-websocket-servlet-listener"}},[e._v("#")]),e._v(" 12. Add Filter, WebSocket, Servlet, Listener")]),e._v(" "),t("p",[e._v("It's crucial to note that Undertow is a web server designed for embedding, so the "),t("code",[e._v("web.xml")]),e._v(" has been deprecated,\nmeaning you can't configure web components through "),t("code",[e._v("web.xml")]),e._v(".")]),e._v(" "),t("p",[e._v("To address this, jfinal undertow provides "),t("code",[e._v("UndertowServer.configWeb(...)")]),e._v(" which allows you to easily add standard Java Web components such as Filter, WebSocket, Servlet, and Listener:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('UndertowServer.create(AppConfig.class)\n     .configWeb( builder -> {\n         // Configure Filter\n         builder.addFilter("myFilter", "com.abc.MyFilter");\n         builder.addFilterUrlMapping("myFilter", "/*");\n         builder.addFilterInitParam("myFilter", "key", "value");\n         \n         // Configure Servlet\n         builder.addServlet("myServlet", "com.abc.MyServlet");\n         builder.addServletMapping("myServlet", "*.do");\n         builder.addServletInitParam("myServlet", "key", "value");\n         \n         // Configure Listener\n         builder.addListener("com.abc.MyListener");\n         \n         // Configure WebSocket. MyWebSocket should use the ServerEndpoint annotation\n         builder.addWebSocketEndpoint("com.abc.MyWebSocket");\n      })\n     .start();\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br")])]),t("p",[e._v("Note: The "),t("code",[e._v("JFinalFilter")]),e._v(" will take over all requests. Thus, servlets mapped in "),t("code",[e._v("addServletMapping(...)")]),e._v(" in the above code by default cannot be accessed. You need to configure the "),t("code",[e._v("UrlSkipHandler")]),e._v(" in the "),t("code",[e._v("configHandler(Handlers me)")]),e._v(" to let jfinal skip these servlet URLs.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("MyWebSocket")]),e._v(" in the above code should be annotated with "),t("code",[e._v("ServerEndpoint")]),e._v(" to indicate that it's a WebSocket component, like:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('@ServerEndpoint("/myapp.ws")\npublic class MyWebSocket { \n    @OnMessage\n    public void message(String message, Session session) {\n        for (Session s : session.getOpenSessions()) {\n            s.getAsyncRemote().sendText(message);\n        }\n    }\n}\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])]),t("p",[e._v("An example HTML that works with the above "),t("code",[e._v("MyWebSocket")]),e._v(" can be downloaded from the link provided (not accessible in this context). Community members have also shared complete WebSocket code "),t("a",{attrs:{href:"https://jfinal.com/share/2004",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v('You need to adjust the URL in the HTML to: "ws://localhost:80/myapp.ws", changing the port number as appropriate.')]),e._v(" "),t("p",[e._v("Note: Since "),t("code",[e._v("JFinalFilter")]),e._v(" takes over all URL requests that don't have a \".\" character, it's suggested that the URL parameter value in the "),t("code",[e._v("@ServerEndpoint")]),e._v(' annotation should end with ".ws". Otherwise, you\'ll receive a 404 error, indicating the resource is not found, like:')]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('@ServerEndpoint("/myapp.ws")\npublic class MyWebSocketEndpoint  {\n    ......\n}\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("Alternatively, if the URL in the "),t("code",[e._v("ServerEndpoint")]),e._v(" doesn't end with \".ws\", you can refer to jfinal's "),t("code",[e._v("UrlSkipHandler")]),e._v(" and implement a "),t("code",[e._v("Handler")]),e._v(" to skip WebSocket URLs.")]),e._v(" "),t("p",[e._v("Lastly, WebSocket support requires adding a dependency. The dependencies to be added can be found in the earlier documentation: "),t("a",{attrs:{href:"https://jfinal.com/doc/1-2",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"ii-ssl-certificates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ii-ssl-certificates"}},[e._v("#")]),e._v(" II. SSL Certificates")]),e._v(" "),t("h3",{attrs:{id:"_1-apply-for-an-ssl-certificate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-apply-for-an-ssl-certificate"}},[e._v("#")]),e._v(" 1. Apply for an SSL Certificate")]),e._v(" "),t("p",[e._v("It's recommended to obtain SSL certificates from platforms like Alibaba Cloud or Tencent Cloud. Both free and paid versions are available. For obtaining an SSL certificate from Alibaba Cloud, refer to the provided link (not accessible in this context).")]),e._v(" "),t("p",[e._v("Note: When applying for a free SSL certificate, the bound domain generally uses a hostname like www, e.g., www.jfinal.com.")]),e._v(" "),t("h3",{attrs:{id:"_2-download-the-appropriate-certificate-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-download-the-appropriate-certificate-type"}},[e._v("#")]),e._v(" 2. Download the Appropriate Certificate Type")]),e._v(" "),t("p",[e._v("Once the SSL certificate has been approved, you can download it from the control panel as shown in the provided screenshot (not accessible in this context).")]),e._v(" "),t("p",[e._v("After clicking the download link, download the Tomcat type of SSL certificate as shown in the second screenshot.")]),e._v(" "),t("p",[e._v("Within the downloaded certificate, there's a file named "),t("code",[e._v("xxx.pfx")]),e._v(", which is the certificate file. Additionally, there's a "),t("code",[e._v("pfx-password.txt")]),e._v(" file containing the certificate password. Place the "),t("code",[e._v("xxx.pfx")]),e._v(" file in the project's "),t("code",[e._v("src/main/resources")]),e._v(" directory and add the following lines to the "),t("code",[e._v("undertow.txt")]),e._v(" configuration file:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# Enable ssl\nundertow.ssl.enable=true\n# ssl listening port, set to 443 in production\nundertow.ssl.port=443\n# Keystore type, typically either PKCS12 or JKS. Adjust based on actual type.\nundertow.ssl.keyStoreType=PKCS12\n# Keystore file\nundertow.ssl.keyStore=demo.pfx\n# Keystore password\nundertow.ssl.keyStorePassword=123456\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])]),t("p",[e._v('The "demo.pfx" in the configuration is the filename of the previously downloaded certificate, and "123456" is the certificate password. Adjust these settings based on the actual contents of your download. "PKCS12" is the certificate type; Alibaba Cloud\'s Tomcat type certificate uses PKCS12, while Tencent Cloud might use "JKS".')]),e._v(" "),t("h3",{attrs:{id:"_3-launch-the-project"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-launch-the-project"}},[e._v("#")]),e._v(" 3. Launch the Project")]),e._v(" "),t("p",[e._v('Start the project and access it via the domain bound when applying for the certificate using "https".')]),e._v(" "),t("h2",{attrs:{id:"iii-two-way-ssl-authentication"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iii-two-way-ssl-authentication"}},[e._v("#")]),e._v(" III. Two-Way SSL Authentication")]),e._v(" "),t("p",[e._v("If your jfinal undertow project needs to authenticate clients using SSL, configure it as follows:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("UndertowServer.create(YourJFinalConfig.class)\n  .onStart( builder -> {\n    builder.setSocketOption(Options.SSL_CLIENT_AUTH_MODE, SslClientAuthMode.REQUESTED);\n  })\n  .start();\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("This method was shared by community users at the provided link "),t("a",{attrs:{href:"https://jfinal.com/feedback/7758",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://jfinal.com/feedback/7758"),t("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=a.exports}}]);